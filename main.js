!function(){"use strict";class e{constructor(e,t){this._settings=e,this._form=t}_showInputError(e,t){const o=this._form.querySelector(".".concat(e.id,"-error"));e.classList.add(this._settings.inputErrorClass),o.textContent=t,o.classList.add(this._settings.errorClass)}_hideInputError(e){const t=this._form.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._settings.inputErrorClass),t.classList.remove(this._settings.errorClass),t.textContent=""}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}_toggleButtonState(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._settings.inactiveButtonClass),this._buttonElement.setAttribute("disabled",!0)):(this._buttonElement.classList.remove(this._settings.inactiveButtonClass),this._buttonElement.removeAttribute("disabled"))}_setEventListeners(){this._inputList=Array.from(this._form.querySelectorAll(this._settings.inputSelector)),this._buttonElement=this._form.querySelector(this._settings.submitButtonSelector),this._toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}resetValidation(){this._inputList.forEach((e=>{this._hideInputError(e),this._toggleButtonState()}))}enableValidation(){this._setEventListeners(this._form),this._form.addEventListener("submit",(function(e){e.preventDefault()}))}}function t(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}document.querySelector(".popup-photo");class o{constructor(e,o,r,s,n){let{_id:i,name:a,link:l,likes:c}=e;t(this,"_handleLikeEvent",(()=>{this._element.querySelector(".photo-card__like-button").classList.contains("photo-card__like-button_active")?this._handleLikeClick(!1):this._handleLikeClick(!0)})),t(this,"_handleDeleteEvent",(()=>{this._handleDeleteCardClick()})),this._id=i,this._name=a,this._image=l,this._likes=c,this._cardSelector=o,this._handleCardClick=r,this._handleDeleteCardClick=s,this._handleLikeClick=n}getId(){return this._id}createCard(){return this._element=this._createNewPhotoCardElement(),this._addEventListeners(),this._element}deleteCard(){this._element.remove(),this._element=null}updateLikes(e,t){this._likes=e;const o=this._element.querySelector(".photo-card__like-button");this._element.querySelector(".photo-card__like-count").textContent=this._likes.length,JSON.stringify(this._likes).includes(t)?o.classList.add("photo-card__like-button_active"):o.classList.remove("photo-card__like-button_active")}_addEventListeners(){const e=this._element.querySelector(".photo-card__like-button");this._addLikeEventListener(e);const t=this._element.querySelector(".photo-card__delete-button");this._addDeleteEventListener(t);const o=this._element.querySelector(".photo-card__photo");this._addOpenPhotoEventListener(o)}_createNewPhotoCardElement(){const e=this._cardSelector.querySelector(".photo-card").cloneNode(!0),t=e.querySelector(".photo-card__photo"),o=e.querySelector(".photo-card__title"),r=e.querySelector(".photo-card__like-count");return t.src=this._image,t.alt=this._name,o.textContent=this._name,r.textContent=this._likes.length,e}_addLikeEventListener(e){e.addEventListener("click",this._handleLikeEvent)}_addDeleteEventListener(e){e.addEventListener("click",this._handleDeleteEvent)}_addOpenPhotoEventListener(e){e.addEventListener("click",(()=>{this._handleCardClick()}))}}function r(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class s{constructor(e){r(this,"_handleEscClose",(e=>{"Escape"==e.key&&this._popup.classList.contains("popup_opened")&&this.close()})),r(this,"_handleClickOnOverlayClose",(e=>{e.target.classList.contains("popup")&&this.close()})),this._popup=document.querySelector(e)}open(){this._popup.classList.add("popup_opened"),this.setEventListeners()}close(){this._popup.classList.remove("popup_opened"),this.removeEventListeners()}setEventListeners(){document.addEventListener("click",this._handleClickOnOverlayClose),document.addEventListener("keydown",this._handleEscClose),this._popup.querySelector(".popup__close-button").addEventListener("click",close)}removeEventListeners(){document.removeEventListener("click",this._handleClickOnOverlayClose),document.removeEventListener("keydown",this._handleEscClose),this._popup.querySelector(".popup__close-button").removeEventListener("click",close)}}class n extends s{constructor(e,t){var o,r;super(e),r=e=>{e.preventDefault(),this._handleSubmit()},(o="_handleProfileFormSubmit")in this?Object.defineProperty(this,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[o]=r,this._handleSubmit=t,this._form=this._popup.querySelector(".form"),this._submitButton=this._popup.querySelector(".form__submit-button")}_getInputValues(){const e={};return Array.from(this._popup.querySelectorAll(".form__text-input")).forEach((t=>{e[t.getAttribute("name")]=t.value})),e}setEventListeners(){this._form.addEventListener("submit",this._handleProfileFormSubmit),super.setEventListeners()}removeEventListeners(){this._form.removeEventListener("submit",this._handleProfileFormSubmit),super.removeEventListeners()}close(){this._form.reset(),super.close()}}class i{constructor(e,t){let{items:o,renderer:r}=e;this._items=o,this._renderer=r,this._container=document.querySelector(t)}clear(){this._container.innerHTML=""}renderer(){this.clear(),this._items.forEach((e=>{this.addItem(this._renderer(e))}))}addItem(e){this._container.prepend(e)}}const a=document.querySelector(".popup-edit"),l=document.querySelector(".popup-add"),c=document.querySelector(".popup-photo"),u=document.querySelector(".popup-delete"),d=document.querySelector(".popup-edit-avatar"),h=a.querySelector(".popup__close-button"),_=l.querySelector(".popup__close-button"),p=c.querySelector(".popup__close-button"),m=u.querySelector(".popup__close-button"),v=d.querySelector(".popup__close-button"),f=a.querySelector(".form"),S=f.querySelector('.form__text-input[name="name"]'),b=f.querySelector('.form__text-input[name="about-me"]'),y=l.querySelector(".form"),E=y.querySelector('.form__text-input[name="title"]'),k=y.querySelector('.form__text-input[name="image-link"]'),L=d.querySelector(".form").querySelector('.form__text-input[name="avatar-link"]'),g=document.querySelector(".profile"),C=g.querySelector(".profile__edit-button"),q=g.querySelector(".profile__add-button"),j=g.querySelector(".profile__photo-edit-button"),I=document.querySelector("#photo-card__template").content,P=new Map;let w;const x={formSelector:".form",inputSelector:".form__text-input",submitButtonSelector:".form__submit-button",inactiveButtonClass:"form__submit-button_disabled",inputErrorClass:"form__text-input-error_active",errorClass:"form__input-error_visible"};function A(e){const t=new o(e,I,U,B,O),r=t.createCard();return t.updateLikes(t._likes,D._id),r}function U(){H.open(this._image,this._name)}function B(){F.open(),w=this}function O(e){e?N.addLike(this.getId()).then((e=>{console.log("Like added succesfully",e.likes),this.updateLikes(e.likes,D._id)})):N.removeLike(this.getId()).then((e=>{console.log("Like removed succesfully",e.likes),this.updateLikes(e.likes,D._id)}))}const N=new class{constructor(e){this._options=e}getInitialCards(){return fetch(this._options.baseUrl+"/cards/",{headers:this._options.headers}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status)))).then((e=>e)).catch((e=>Promise.reject("Error: ".concat(e.status)))).finally((()=>{console.log("All done")}))}setNewCard(e){let{cardName:t,cardLink:o}=e;return fetch(this._options.baseUrl+"/cards/",{method:"POST",headers:this._options.headers,body:JSON.stringify({name:t,link:o})}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status)))).then((e=>e)).catch((e=>Promise.reject("Error: ".concat(e.status)))).finally((()=>{console.log("All done")}))}addLike(e){return fetch(this._options.baseUrl+"/cards/likes/"+e,{method:"PUT",headers:this._options.headers}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status)))).then((e=>e)).catch((e=>Promise.reject("Error: ".concat(e.status)))).finally((()=>{console.log("All done")}))}removeLike(e){return fetch(this._options.baseUrl+"/cards/likes/"+e,{method:"DELETE",headers:this._options.headers}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status)))).then((e=>e)).catch((e=>Promise.reject("Error: ".concat(e.status)))).finally((()=>{console.log("All done")}))}deleteCard(e){return fetch(this._options.baseUrl+"/cards/"+e,{method:"DELETE",headers:this._options.headers}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status,", ").concat(e.body)))).then((e=>e)).catch((e=>Promise.reject("Error: ".concat(e.status,", ").concat(e.body)))).finally((()=>{console.log("All done")}))}getUserInfo(){return fetch(this._options.baseUrl+"/users/me",{headers:this._options.headers}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status)))).then((e=>e)).catch((e=>Promise.reject("Error: ".concat(e.status)))).finally((()=>{console.log("All done")}))}setUserInfo(e){let{newName:t,newAbout:o}=e;return fetch(this._options.baseUrl+"/users/me",{method:"PATCH",headers:this._options.headers,body:JSON.stringify({name:t,about:o})}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status)))).then((e=>e)).catch((e=>Promise.reject("Error: ".concat(e.status)))).finally((()=>{console.log("All done")}))}updateAvatar(e){return fetch(this._options.baseUrl+"/users/me/avatar",{method:"PATCH",headers:this._options.headers,body:JSON.stringify({avatar:e})}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status)))).then((e=>e)).catch((e=>Promise.reject("Error: ".concat(e.status)))).finally((()=>{console.log("All done")}))}}({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"b9d1c3b6-c0f4-4224-ad8f-4c81efa3f89d","Content-Type":"application/json"}}),D=new class{constructor(e){let{nameSelector:t,jobSelector:o,avatarSelector:r}=e;this._nameSelector=t,this._jobSelector=o,this._avatarSelector=r}getUserInfo(){return{name:document.querySelector(this._nameSelector).textContent,job:document.querySelector(this._jobSelector).textContent,avatar:document.querySelector(this._avatarSelector).src}}setUserInfo(e){let{name:t,about:o,_id:r,avatar:s}=e;const n=document.querySelector(this._nameSelector),i=document.querySelector(this._jobSelector),a=document.querySelector(this._avatarSelector);n.textContent=t,i.textContent=o,a.src=s,this._id=r}}({nameSelector:".profile__name",jobSelector:".profile__description",avatarSelector:".profile__photo"});let V;N.getUserInfo().then((e=>{console.log(e),D.setUserInfo(e)})),N.getInitialCards().then((e=>{V=new i({items:e,renderer:A},".photos__grid"),V.renderer()}));const T=new n(".popup-add",(function(){const e={cardName:E.value,cardLink:k.value};this._submitButton.textContent="Saving...",N.setNewCard(e).then((e=>{const t=new o(e,I,U,B,O);V.addItem(t.createCard()),t.updateLikes(t._likes,D._id)})).finally((()=>{this.close(),this._submitButton.textContent="Create"}))})),J=new n(".popup-edit",(function(){this._submitButton.textContent="Saving...",N.setUserInfo({newName:S.value,newAbout:b.value}).then((e=>{D.setUserInfo(e)})).finally((()=>{this.close(),this._submitButton.textContent="Save"}))})),F=new n(".popup-delete",(function(){N.deleteCard(w.getId()).then((()=>{console.log("Card deleted"),w.deleteCard(),w=null}))})),H=new class extends s{constructor(e){super(e)}open(e,t){const o=this._popup.querySelector(".popup-photo__container"),r=o.querySelector(".popup-photo__photo"),s=o.querySelector(".popup-photo__title");r.src=e,s.textContent=t,r.alt=t,super.open()}}(".popup-photo"),M=new n(".popup-edit-avatar",(function(){this._submitButton.textContent="Saving...",N.updateAvatar(L.value).then((e=>{console.log("Avatar updated ",e),D.setUserInfo(e)})).finally((()=>{this.close(),this._submitButton.textContent="Save"}))}));Array.from(document.querySelectorAll(x.formSelector)).forEach((t=>{const o=t.getAttribute("name"),r=new e(x,t);r.enableValidation(),P.set(o,r)})),q.addEventListener("click",(()=>{T.open(),P.get("add-form").resetValidation()})),_.addEventListener("click",(()=>{T.close()})),C.addEventListener("click",(()=>{const e=D.getUserInfo();S.value=e.name,b.value=e.job,J.open(),P.get("edit-form").resetValidation()})),h.addEventListener("click",(()=>{J.close()})),p.addEventListener("click",(()=>{H.close()})),j.addEventListener("click",(()=>{M.open(),P.get("edit-avatar-form").resetValidation()})),v.addEventListener("click",(()=>{M.close()})),m.addEventListener("click",(()=>{F.close()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVEyRyxFQUFnQnJLLEtBQ2xDcUYsRUFBaUIzQixNQUFRMkcsRUFBZ0JoQixJQUN6Q00sRUFBVWhILE9BQ1ZxRCxFQUFNb0UsSUFuUWEsYUFtUUsvSyxxQkFHMUJ5RixFQUFnQjFGLGlCQUFpQixTQUFTLEtBQ3hDdUssRUFBVWxILFdBS1p1QyxFQUFpQjVGLGlCQUFpQixTQUFTLEtBQ3pDc0gsRUFBV2pFLFdBSWJvRCxFQUFpQnpHLGlCQUFpQixTQUFTLEtBQ3pDMkssRUFBZ0JwSCxPQUNoQnFELEVBQU1vRSxJQWhSbUIsb0JBZ1JLL0sscUJBR2hDNkYsRUFBc0I5RixpQkFBaUIsU0FBUyxLQUM5QzJLLEVBQWdCdEgsV0FJbEJ3QyxFQUFrQjdGLGlCQUFpQixTQUFTLEtBQzFDdUgsRUFBWWxFLFciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtKXtcbiAgICB0aGlzLl9zZXR0aW5ncyA9IHNldHRpbmdzO1xuICAgIHRoaXMuX2Zvcm0gPSBmb3JtO1xuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuZXJyb3JDbGFzcyk7XG4gIH07XG5cbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NldHRpbmdzLmlucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3MuZXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcbiAgfTtcblxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfVxuICB9O1xuXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICAgIH0pO1xuICB9O1xuXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9zZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgdHJ1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XG4gICAgfVxuICB9O1xuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9zZXR0aW5ncy5pbnB1dFNlbGVjdG9yKSk7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9zZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG5cbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgcmVzZXRWYWxpZGF0aW9uKCl7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgfSk7XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKHRoaXMuX2Zvcm0pO1xuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcbiAgfTtcbn1cblxuXG5leHBvcnQge0Zvcm1WYWxpZGF0b3J9O1xuIiwiXG5jb25zdCBwb3B1cFBob3RvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwLXBob3RvJyk7XG5cblxuY2xhc3MgQ2FyZCB7XG5cbiAgICBjb25zdHJ1Y3Rvcih7IF9pZCwgbmFtZSwgbGluaywgbGlrZXMgfSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVDYXJkQ2xpY2ssIGhhbmRsZURlbGV0ZUNhcmRDbGljaywgaGFuZGxlTGlrZUNsaWNrKSB7XG5cbiAgICAgICAgdGhpcy5faWQgPSBfaWQ7XG4gICAgICAgIHRoaXMuX25hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLl9pbWFnZSA9IGxpbms7XG4gICAgICAgIHRoaXMuX2xpa2VzID0gbGlrZXM7XG4gICAgICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcbiAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xuICAgICAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkQ2xpY2sgPSBoYW5kbGVEZWxldGVDYXJkQ2xpY2s7XG4gICAgICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljayA9IGhhbmRsZUxpa2VDbGljaztcbiAgICB9XG5cbiAgICBnZXRJZCgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9pZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIG9uZSBzaW5nbGUgcGhvdG8gY2FyZCB3aXRoIHNwZWNpZmllZCBjYXJkIGluZm9ybWF0aW9uIChvYmplY3QpXG4gICAgICogQHBhcmFtIHtvYmplY3R9IGNhcmRcbiAgICAgKiBAcmV0dXJucyBwaG90b0NhcmQgdG8gYmUgcmVuZGVyZWRcbiAgICAgKi9cbiAgICBjcmVhdGVDYXJkKCkge1xuICAgICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2NyZWF0ZU5ld1Bob3RvQ2FyZEVsZW1lbnQoKTtcbiAgICAgIHRoaXMuX2FkZEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICAgIH1cblxuICAgIGRlbGV0ZUNhcmQoKSB7XG4gICAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xuICAgICAgdGhpcy5fZWxlbWVudCA9IG51bGw7XG4gICAgfVxuXG4gICAgdXBkYXRlTGlrZXMobGlrZXMsIHVzZXJJZCkge1xuICAgICAgdGhpcy5fbGlrZXMgPSBsaWtlcztcbiAgICAgIGNvbnN0IGxpa2VCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGhvdG8tY2FyZF9fbGlrZS1idXR0b25cIik7XG5cbiAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5waG90by1jYXJkX19saWtlLWNvdW50XCIpLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xuXG4gICAgICBpZihKU09OLnN0cmluZ2lmeSh0aGlzLl9saWtlcykuaW5jbHVkZXModXNlcklkKSkge1xuICAgICAgICBsaWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3Bob3RvLWNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZScpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGlrZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdwaG90by1jYXJkX19saWtlLWJ1dHRvbl9hY3RpdmUnKTtcbiAgICAgIH1cbiAgICAgIFxuICAgIH1cblxuICAgIF9hZGRFdmVudExpc3RlbmVycygpe1xuXG4gICAgICAgIGNvbnN0IGxpa2VCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGhvdG8tY2FyZF9fbGlrZS1idXR0b25cIik7XG4gICAgICAgIHRoaXMuX2FkZExpa2VFdmVudExpc3RlbmVyKGxpa2VCdXR0b24pO1xuXG4gICAgICAgIGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5waG90by1jYXJkX19kZWxldGUtYnV0dG9uXCIpO1xuICAgICAgICB0aGlzLl9hZGREZWxldGVFdmVudExpc3RlbmVyKGRlbGV0ZUJ1dHRvbik7XG5cbiAgICAgICAgY29uc3QgcGhvdG8gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGhvdG8tY2FyZF9fcGhvdG9cIik7XG4gICAgICAgIHRoaXMuX2FkZE9wZW5QaG90b0V2ZW50TGlzdGVuZXIocGhvdG8pO1xuICAgIH1cblxuICAgIF9jcmVhdGVOZXdQaG90b0NhcmRFbGVtZW50KCkge1xuICAgICAgICBjb25zdCBwaG90b0NhcmQgPSB0aGlzLl9jYXJkU2VsZWN0b3IucXVlcnlTZWxlY3RvcihcIi5waG90by1jYXJkXCIpLmNsb25lTm9kZSh0cnVlKTtcblxuICAgICAgICBjb25zdCBwaG90byA9IHBob3RvQ2FyZC5xdWVyeVNlbGVjdG9yKFwiLnBob3RvLWNhcmRfX3Bob3RvXCIpO1xuICAgICAgICBjb25zdCBwaG90b1RpdGxlID0gcGhvdG9DYXJkLnF1ZXJ5U2VsZWN0b3IoXCIucGhvdG8tY2FyZF9fdGl0bGVcIik7XG4gICAgICAgIGNvbnN0IHBob3RvTGlrZXMgPSBwaG90b0NhcmQucXVlcnlTZWxlY3RvcihcIi5waG90by1jYXJkX19saWtlLWNvdW50XCIpO1xuXG4gICAgICAgIHBob3RvLnNyYyA9IHRoaXMuX2ltYWdlO1xuICAgICAgICBwaG90by5hbHQgPSB0aGlzLl9uYW1lO1xuICAgICAgICBwaG90b1RpdGxlLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcbiAgICAgICAgcGhvdG9MaWtlcy50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcblxuICAgICAgICByZXR1cm4gcGhvdG9DYXJkO1xuICAgIH1cblxuICAgIC8qXG4gICAgS2VlcGluZyBjb21tZW50IGZvciBsZWFybmluZyBwdXJwb3Nlc1xuICAgIGRlY2xhcmUgbWV0aG9kcyBhcyBhcnJvdyBmdW5jdGlvbnMgdG8gbm90IGxvc2UgY29udGV4dCBgdGhpc2AuIGB0aGlzYCBpcyBDYXJkIGluc3RhbmNlIGhlcmVcbiAgICAqL1xuICAgIF9oYW5kbGVMaWtlRXZlbnQgPSAoKSA9PiB7XG4gICAgICBjb25zdCBsaWtlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBob3RvLWNhcmRfX2xpa2UtYnV0dG9uXCIpO1xuICAgICAgaWYobGlrZUJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoJ3Bob3RvLWNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZScpKSB7XG4gICAgICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljayhmYWxzZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2sodHJ1ZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgX2FkZExpa2VFdmVudExpc3RlbmVyKGxpa2VCdXR0b24pIHtcbiAgICAgICAgbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlTGlrZUV2ZW50KTtcbiAgICB9XG5cbiAgICBfaGFuZGxlRGVsZXRlRXZlbnQgPSAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkQ2xpY2soKTtcbiAgICB9XG5cbiAgICBfYWRkRGVsZXRlRXZlbnRMaXN0ZW5lcihkZWxldGVCdXR0b24pIHtcbiAgICAgICAgZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVEZWxldGVFdmVudCk7XG4gICAgfVxuXG4gICAgX2FkZE9wZW5QaG90b0V2ZW50TGlzdGVuZXIocGhvdG8pIHtcbiAgICAgICAgcGhvdG8uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2soKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG59XG5cbmV4cG9ydCB7Q2FyZH1cbiIsImNsYXNzIFBvcHVwIHtcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICB9XG5cbiAgICBvcGVuKCkge1xuICAgICAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfb3BlbmVkXCIpO1xuICAgICAgICB0aGlzLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgfVxuXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9vcGVuZWRcIik7XG4gICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB9XG5cbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVDbGlja09uT3ZlcmxheUNsb3NlKTtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICAgIHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2xvc2UtYnV0dG9uJykuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsb3NlKTtcbiAgICB9XG5cbiAgICByZW1vdmVFdmVudExpc3RlbmVycygpIHtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVDbGlja09uT3ZlcmxheUNsb3NlKTtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICAgIHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2xvc2UtYnV0dG9uJykucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsb3NlKTtcbiAgICB9XG5cbiAgICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XG4gICAgICAgIGlmKGV2dC5rZXkgPT0gXCJFc2NhcGVcIiAmJiB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX29wZW5lZCcpKXtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9oYW5kbGVDbGlja09uT3ZlcmxheUNsb3NlID0gKGV2dCkgPT4ge1xuICAgICAgICBpZihldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwXCIpKXtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfVxuICB9XG5cbn1cblxuZXhwb3J0IHtQb3B1cH07XG4iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlU3VibWl0KSB7XG4gICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCA9IGhhbmRsZVN1Ym1pdDtcbiAgICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcuZm9ybScpO1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLmZvcm1fX3N1Ym1pdC1idXR0b24nKTtcbiAgICB9XG5cbiAgICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgICAgIGNvbnN0IGlucHV0VmFsdWVzID0ge307XG4gICAgICAgIGNvbnN0IGlucHV0cyA9IEFycmF5LmZyb20odGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvckFsbChcIi5mb3JtX190ZXh0LWlucHV0XCIpKTtcblxuICAgICAgICBpbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgICAgICAgIGlucHV0VmFsdWVzW2lucHV0LmdldEF0dHJpYnV0ZSgnbmFtZScpXSA9IGlucHV0LnZhbHVlO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gaW5wdXRWYWx1ZXM7XG4gICAgfVxuXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgdGhpcy5faGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQpO1xuICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB9XG5cbiAgICByZW1vdmVFdmVudExpc3RlbmVycygpIHtcbiAgICAgIHRoaXMuX2Zvcm0ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLl9oYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCk7XG4gICAgICBzdXBlci5yZW1vdmVFdmVudExpc3RlbmVycygpO1xuICAgIH1cblxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XG4gICAgICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgfVxuXG4gICAgX2hhbmRsZVByb2ZpbGVGb3JtU3VibWl0ID0gKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9oYW5kbGVTdWJtaXQoKTtcbiAgICB9XG59XG5cbmV4cG9ydCB7IFBvcHVwV2l0aEZvcm0gfVxuIiwiY2xhc3MgU2VjdGlvbiB7XG4gICAgY29uc3RydWN0b3IoIHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XG4gICAgICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICAgIH1cblxuICAgIGNsZWFyKCkge1xuICAgICAgICB0aGlzLl9jb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcbiAgICB9XG5cbiAgICByZW5kZXJlcigpIHtcbiAgICAgICAgdGhpcy5jbGVhcigpO1xuXG4gICAgICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgICAgdGhpcy5hZGRJdGVtKHRoaXMuX3JlbmRlcmVyKGl0ZW0pKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgYWRkSXRlbShpdGVtKSB7XG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGl0ZW0pO1xuICAgIH1cbn1cblxuZXhwb3J0IHtTZWN0aW9ufVxuIiwiaW1wb3J0IFwiLi9zdHlsZXMvaW5kZXguY3NzXCI7XG5cbmltcG9ydCB7IEZvcm1WYWxpZGF0b3IgfSBmcm9tIFwiLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCB7IENhcmQgfSBmcm9tIFwiLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCB7IFBvcHVwV2l0aEZvcm0gfSBmcm9tIFwiLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCB7IFBvcHVwV2l0aEltYWdlIH0gZnJvbSBcIi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IHsgVXNlckluZm8gfSBmcm9tIFwiLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCJcbmltcG9ydCB7IFNlY3Rpb24gfSBmcm9tIFwiLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCB7IEFwaSB9IGZyb20gXCIuL2NvbXBvbmVudHMvQXBpLmpzXCJcblxuLy9UT0RPIGhvdyB0byB1c2UgaXQgb24gUG9wdXBGb3JtIHdoZW4gb3BlbmluZyBpdCwgdG8gcmV0cmlldmUgdGhlIGluZm8uXG5jb25zdCB1c2VyU2VsZWN0b3JzID0ge1xuICBuYW1lU2VsZWN0b3I6IFwiLnByb2ZpbGVfX25hbWVcIixcbiAgam9iU2VsZWN0b3I6IFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIsXG4gIGF2YXRhclNlbGVjdG9yOiBcIi5wcm9maWxlX19waG90b1wiXG59O1xuXG5jb25zdCBpbml0aWFsVXNlckluZm8gPSB7XG4gIG5ld05hbWU6IFwiSmFjcXVlcyBDb3VzdGVhdVwiLFxuICBuZXdKb2I6IFwiRXhwbG9yZXJcIlxufTtcblxuLyoqIERlY2xhcmF0aW9uIG9mIHRoZSBQb3B1cHMgKi9cbmNvbnN0IHBvcHVwRWRpdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cC1lZGl0Jyk7XG5jb25zdCBwb3B1cEFkZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cC1hZGQnKTtcbmNvbnN0IHBvcHVwUGhvdG8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXAtcGhvdG8nKTtcbmNvbnN0IHBvcHVwRGVsZXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwLWRlbGV0ZScpXG5jb25zdCBwb3B1cEVkaXRBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXAtZWRpdC1hdmF0YXInKTtcblxuLyoqIERlY2xhcmF0aW9uIG9mIHRoZSBDbG9zZSBCdXR0b25zICovXG5jb25zdCBjbG9zZUJ1dHRvbkVkaXQgPSBwb3B1cEVkaXQucXVlcnlTZWxlY3RvcignLnBvcHVwX19jbG9zZS1idXR0b24nKTtcbmNvbnN0IGNsb3NlQnV0dG9uQWRkID0gcG9wdXBBZGQucXVlcnlTZWxlY3RvcignLnBvcHVwX19jbG9zZS1idXR0b24nKTtcbmNvbnN0IGNsb3NlQnV0dG9uUGhvdG8gPSBwb3B1cFBob3RvLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2xvc2UtYnV0dG9uJyk7XG5jb25zdCBjbG9zZUJ1dHRvbkRlbGV0ZSA9IHBvcHVwRGVsZXRlLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2xvc2UtYnV0dG9uJyk7XG5jb25zdCBjbG9zZUJ1dHRvbkVkaXRBdmF0YXIgPSBwb3B1cEVkaXRBdmF0YXIucXVlcnlTZWxlY3RvcignLnBvcHVwX19jbG9zZS1idXR0b24nKTtcblxuLyoqIERlY2xhcmF0aW9uIG9mIHRoZSBGb3JtcyAqL1xuXG5jb25zdCBmb3JtRWRpdE5hbWUgPSAnZWRpdC1mb3JtJztcbmNvbnN0IGZvcm1BZGROYW1lID0gJ2FkZC1mb3JtJztcbmNvbnN0IGZvcm1EZWxldGVOYW1lID0gJ2RlbGV0ZS1mb3JtJztcbmNvbnN0IGZvcm1FZGl0QXZhdGFyTmFtZSA9ICdlZGl0LWF2YXRhci1mb3JtJztcblxuY29uc3QgZm9ybUVkaXQgPSBwb3B1cEVkaXQucXVlcnlTZWxlY3RvcignLmZvcm0nKTtcbmNvbnN0IG5hbWVJbnB1dCA9IGZvcm1FZGl0LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX190ZXh0LWlucHV0W25hbWU9XCJuYW1lXCJdJyk7XG5jb25zdCBkZXNjcmlwdGlvbklucHV0ID0gZm9ybUVkaXQucXVlcnlTZWxlY3RvcignLmZvcm1fX3RleHQtaW5wdXRbbmFtZT1cImFib3V0LW1lXCJdJyk7XG5cbmNvbnN0IGZvcm1BZGQgPSBwb3B1cEFkZC5xdWVyeVNlbGVjdG9yKCcuZm9ybScpO1xuY29uc3QgdGl0bGVJbnB1dCA9IGZvcm1BZGQucXVlcnlTZWxlY3RvcignLmZvcm1fX3RleHQtaW5wdXRbbmFtZT1cInRpdGxlXCJdJyk7XG5jb25zdCBsaW5rSW5wdXQgPSBmb3JtQWRkLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX190ZXh0LWlucHV0W25hbWU9XCJpbWFnZS1saW5rXCJdJyk7XG5cbmNvbnN0IGZvcm1FZGl0QXZhdGFyID0gcG9wdXBFZGl0QXZhdGFyLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtJyk7XG5jb25zdCBhdmF0YXJMaW5rSW5wdXQgPSBmb3JtRWRpdEF2YXRhci5xdWVyeVNlbGVjdG9yKCcuZm9ybV9fdGV4dC1pbnB1dFtuYW1lPVwiYXZhdGFyLWxpbmtcIl0nKTtcblxuY29uc3QgcHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlJyk7XG5jb25zdCBlZGl0QnV0dG9uID0gcHJvZmlsZS5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xuY29uc3QgYWRkQnV0dG9uID0gcHJvZmlsZS5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XG5jb25zdCBlZGl0QXZhdGFyQnV0dG9uID0gcHJvZmlsZS5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3Bob3RvLWVkaXQtYnV0dG9uXCIpO1xuXG4vKiogRGVjbGFyYXRpb24gb2YgdGhlIFBob3RvcyAqL1xuY29uc3QgcGhvdG9HcmlkU2VsZWN0b3IgPSBcIi5waG90b3NfX2dyaWRcIjtcbmNvbnN0IHBob3RvQ2FyZFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwaG90by1jYXJkX190ZW1wbGF0ZVwiKS5jb250ZW50O1xuXG4vKiogRGVjbGFyYXRpb24gb2YgdGhlIEluaXRpYWwgQ2FyZHMgKi9cbmNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS95b3NlbWl0ZS5qcGdcIlxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFrZS1sb3Vpc2UuanBnXCJcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2JhbGQtbW91bnRhaW5zLmpwZ1wiXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhdGVtYXIuanBnXCJcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS92YW5vaXNlLmpwZ1wiXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWdvLmpwZ1wiXG4gIH1cbl07XG5cbmNvbnN0IGZvcm1zID0gbmV3IE1hcCgpO1xubGV0IGNhcmRUb0RlbGV0ZTtcblxuLyoqIERlY2xhcmF0aW9uIG9mIHRoZSBTZXR0aW5nIG9iamVjdCBmb3IgY2FyZCB2YWxpZGF0aW9uICovXG5jb25zdCB2YWxpZGF0aW9uQ29uZmlnID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLmZvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIuZm9ybV9fdGV4dC1pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIuZm9ybV9fc3VibWl0LWJ1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcImZvcm1fX3N1Ym1pdC1idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcImZvcm1fX3RleHQtaW5wdXQtZXJyb3JfYWN0aXZlXCIsXG4gIGVycm9yQ2xhc3M6IFwiZm9ybV9faW5wdXQtZXJyb3JfdmlzaWJsZVwiXG59O1xuXG5cbi8qKlxuICogSGFuZGxlcyBjYXJkIGNyZWF0aW9uIG9uIFNlY3Rpb25cbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIC0gVGhlIHRpdGxlIG9mIHRoZSBjYXJkXG4gKiBAcGFyYW0ge3N0cmluZ30gbGluayAtIFRoZSBsaW5rIG9mIHRoZSBwaG90b1xuICovXG5mdW5jdGlvbiByZW5kZXJDYXJkKGNhcmQpIHtcbiAgY29uc3QgbmV3Q2FyZCA9IG5ldyBDYXJkKGNhcmQsIHBob3RvQ2FyZFRlbXBsYXRlLCBoYW5kbGVDYXJkQ2xpY2ssICBoYW5kbGVDYXJkRGVsZXRlQ2xpY2ssIGhhbmRsZUxpa2VDbGljayk7XG4gIGNvbnN0IHBob3RvQ2FyZCA9IG5ld0NhcmQuY3JlYXRlQ2FyZCgpO1xuICBuZXdDYXJkLnVwZGF0ZUxpa2VzKG5ld0NhcmQuX2xpa2VzLCB1c2VySW5mby5faWQpO1xuICByZXR1cm4gcGhvdG9DYXJkO1xufVxuXG4vKipcbiAqIEhhbmRsZXMgbmV3IHBsYWNlIGZvcm0gc3VibWl0IChTZW50IHRvIHBvcHVwV2l0aEZvcm0pXG4gKi9cbmZ1bmN0aW9uIGhhbmRsZU5ld1BsYWNlRm9ybVN1Ym1pdCgpIHtcbiAgY29uc3QgY2FyZCA9IHtcbiAgICBjYXJkTmFtZTogdGl0bGVJbnB1dC52YWx1ZSxcbiAgICBjYXJkTGluazogbGlua0lucHV0LnZhbHVlXG4gIH07XG5cbiAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJTYXZpbmcuLi5cIjtcbiAgYXBpLnNldE5ld0NhcmQoY2FyZClcbiAgICAudGhlbihyZXMgPT4ge1xuICAgICAgY29uc3QgbmV3Q2FyZCA9IG5ldyBDYXJkKHJlcywgcGhvdG9DYXJkVGVtcGxhdGUsIGhhbmRsZUNhcmRDbGljaywgaGFuZGxlQ2FyZERlbGV0ZUNsaWNrLCBoYW5kbGVMaWtlQ2xpY2spO1xuICAgICAgc2VjdGlvbi5hZGRJdGVtKG5ld0NhcmQuY3JlYXRlQ2FyZCgpKTtcbiAgICAgIG5ld0NhcmQudXBkYXRlTGlrZXMobmV3Q2FyZC5fbGlrZXMsIHVzZXJJbmZvLl9pZCk7XG4gICAgICB9KVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIkNyZWF0ZVwiO1xuICAgIH0pXG59XG5cbi8qKlxuICogSGFuZGxlcyBuZXcgcHJvZmlsZSBmb3JtIHN1Ym1pdCAoU2VudCB0byBwb3B1cFdpdGhGb3JtKVxuICovXG5mdW5jdGlvbiBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCgpIHtcbiAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJTYXZpbmcuLi5cIjtcbiAgYXBpLnNldFVzZXJJbmZvKHsgbmV3TmFtZTogbmFtZUlucHV0LnZhbHVlLCBuZXdBYm91dDogZGVzY3JpcHRpb25JbnB1dC52YWx1ZSB9KVxuICAudGhlbiggcmVzID0+IHtcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyhyZXMpO1xuICB9KVxuICAuZmluYWxseSgoKSA9PiB7XG4gICAgdGhpcy5jbG9zZSgpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2ZVwiO1xuICB9KVxufVxuXG4vKipcbiAqIERlbGV0ZXMgdGhlIHNlbGVjdGVkIENhcmRcbiAqL1xuZnVuY3Rpb24gaGFuZGxlRGVsZXRlRm9ybVN1Ym1pdCgpIHtcbiAgYXBpLmRlbGV0ZUNhcmQoY2FyZFRvRGVsZXRlLmdldElkKCkpXG4gICAgLnRoZW4oKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coXCJDYXJkIGRlbGV0ZWRcIik7XG4gICAgICBjYXJkVG9EZWxldGUuZGVsZXRlQ2FyZCgpO1xuICAgICAgY2FyZFRvRGVsZXRlPW51bGw7XG4gICAgfSlcbn1cblxuLyoqXG4gKiBVcGRhdGVzIHRoZSBhdmF0YXIgcGhvdG9cbiAqL1xuZnVuY3Rpb24gaGFuZGxlRWRpdEF2YXRhckZvcm1TdWJtaXQoKSB7XG4gIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2aW5nLi4uXCI7XG5cbiAgYXBpLnVwZGF0ZUF2YXRhcihhdmF0YXJMaW5rSW5wdXQudmFsdWUpXG4gICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgY29uc29sZS5sb2coXCJBdmF0YXIgdXBkYXRlZCBcIixyZXMpO1xuICAgICAgdXNlckluZm8uc2V0VXNlckluZm8ocmVzKTtcbiAgICB9KVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2ZVwiO1xuICB9KVxufVxuXG4vKipcbiAqIEhhbmRsZXMgb3BlbiBwaG90byBvbiBjYXJkIGNsaWNrIChzZW50IHRvIHBvcHVwV2l0aENhcmQpXG4gKi9cbmZ1bmN0aW9uIGhhbmRsZUNhcmRDbGljaygpIHtcbiAgcGhvdG9Qb3B1cC5vcGVuKHRoaXMuX2ltYWdlLCB0aGlzLl9uYW1lKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlQ2FyZERlbGV0ZUNsaWNrKCkge1xuICBkZWxldGVQb3B1cC5vcGVuKCk7XG4gIGNhcmRUb0RlbGV0ZSA9IHRoaXM7XG59XG5cbi8qKlxuICogQ2FsbHMgdGhlIEFQSSB0byBhZGQvcmVtb3ZlIGEgbGlrZSB0byB0aGUgbGlzdCBkZXBlbmRpbmcgb24gdGhlIGlzTGlrZWQgcGFyYW0uXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGlzTGlrZWRcbiAqL1xuZnVuY3Rpb24gaGFuZGxlTGlrZUNsaWNrKGlzTGlrZWQpIHtcbiAgaWYoaXNMaWtlZCkge1xuICAgIGFwaS5hZGRMaWtlKHRoaXMuZ2V0SWQoKSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coXCJMaWtlIGFkZGVkIHN1Y2Nlc2Z1bGx5XCIsIHJlcy5saWtlcyk7XG4gICAgICAgIHRoaXMudXBkYXRlTGlrZXMocmVzLmxpa2VzLCB1c2VySW5mby5faWQpO1xuICAgICAgfSlcbiAgfSBlbHNlIHtcbiAgICBhcGkucmVtb3ZlTGlrZSh0aGlzLmdldElkKCkpXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiTGlrZSByZW1vdmVkIHN1Y2Nlc2Z1bGx5XCIsIHJlcy5saWtlcyk7XG4gICAgICAgIHRoaXMudXBkYXRlTGlrZXMocmVzLmxpa2VzLCB1c2VySW5mby5faWQpO1xuICAgICAgfSlcbiAgfVxufVxuXG4vKipcbiAqIEVuYWJsZXMgdmFsaWRhdGlvbiBvbiBhbGwgZm9ybXMuXG4gKiBTYXZlcyB0aGUgZm9ybVZhbGlkYXRvcnMgb24gYSBNYXAgZm9yIGZ1dHVyZSBhY2Nlc3NcbiAqL1xuZnVuY3Rpb24gZW5hYmxlRm9ybVZhbGlkYXRpb25PbkFsbEZvcm1zKCkge1xuICBjb25zdCBmb3JtTGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh2YWxpZGF0aW9uQ29uZmlnLmZvcm1TZWxlY3RvcikpO1xuICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xuICAgIGNvbnN0IGZvcm1OYW1lID0gZm9ybUVsZW1lbnQuZ2V0QXR0cmlidXRlKFwibmFtZVwiKTtcbiAgICBjb25zdCBmb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbkNvbmZpZywgZm9ybUVsZW1lbnQpO1xuICAgIGZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuICAgIGZvcm1zLnNldChmb3JtTmFtZSwgZm9ybVZhbGlkYXRvcik7XG4gIH0pO1xufVxuXG4vKipcbiAqIFNldHRpbmcgdXAgdGhlIEFwaSBjbGFzc1xuICovXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2dyb3VwLTEyXCIsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiBcImI5ZDFjM2I2LWMwZjQtNDIyNC1hZDhmLTRjODFlZmEzZjg5ZFwiLFxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gIH1cbn0pO1xuXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh1c2VyU2VsZWN0b3JzKTtcblxuLyoqIFVzZXIgaW5mb3JtYXRpb24gbG9hZGluZyAqL1xuYXBpLmdldFVzZXJJbmZvKClcbiAgLnRoZW4ocmVzID0+IHtcbiAgICBjb25zb2xlLmxvZyhyZXMpO1xuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHJlcyk7XG4gIH0pXG5cbi8qKlxuICogTG9hZGluZyBjYXJkcyB3aXRoIFNlY3Rpb25cbiAqL1xuXG5sZXQgc2VjdGlvbjtcblxuYXBpLmdldEluaXRpYWxDYXJkcygpXG4gIC50aGVuKHJlcyA9PiB7XG4gICAgc2VjdGlvbiA9IG5ldyBTZWN0aW9uKCB7XG4gICAgICBpdGVtczogcmVzLFxuICAgICAgcmVuZGVyZXI6IHJlbmRlckNhcmRcbiAgICB9LFxuICAgIHBob3RvR3JpZFNlbGVjdG9yKTtcblxuICAgIHNlY3Rpb24ucmVuZGVyZXIoKTtcblxufSk7XG5cbi8qKiBQb3B1cCBsb2FkaW5nIGFuZCBldmVudCBsaXN0ZW5lciBzZXR1cCAqL1xuY29uc3QgYWRkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSgnLnBvcHVwLWFkZCcsIGhhbmRsZU5ld1BsYWNlRm9ybVN1Ym1pdCk7XG5jb25zdCBlZGl0UG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSgnLnBvcHVwLWVkaXQnLCBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCk7XG5jb25zdCBkZWxldGVQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKCcucG9wdXAtZGVsZXRlJywgaGFuZGxlRGVsZXRlRm9ybVN1Ym1pdCk7XG5jb25zdCBwaG90b1BvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKCcucG9wdXAtcGhvdG8nKTtcbmNvbnN0IGVkaXRBdmF0YXJQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKCcucG9wdXAtZWRpdC1hdmF0YXInLCBoYW5kbGVFZGl0QXZhdGFyRm9ybVN1Ym1pdCk7XG5cbi8qKiBFbmFibGUgVmFsaWRhdGlvbiAqL1xuZW5hYmxlRm9ybVZhbGlkYXRpb25PbkFsbEZvcm1zKCk7XG5cblxuLyoqIERlY2xhcmF0aW9uIG9mIHRoZSBldmVudCBsaXN0ZW5lcnMgKi9cblxuLyoqIEFkZCBQb3B1cCBhbmQgRm9ybSAqL1xuYWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGFkZFBvcHVwLm9wZW4oKTtcbiAgZm9ybXMuZ2V0KGZvcm1BZGROYW1lKS5yZXNldFZhbGlkYXRpb24oKTtcbn0pO1xuXG5jbG9zZUJ1dHRvbkFkZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBhZGRQb3B1cC5jbG9zZSgpO1xufSk7XG5cblxuLyoqIEVkaXQgUG9wdXAgYW5kIEZvcm0gKi9cbmVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgY29uc3QgY3VycmVudFVzZXJJbmZvID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgbmFtZUlucHV0LnZhbHVlID0gY3VycmVudFVzZXJJbmZvLm5hbWU7XG4gIGRlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSBjdXJyZW50VXNlckluZm8uam9iO1xuICBlZGl0UG9wdXAub3BlbigpO1xuICBmb3Jtcy5nZXQoZm9ybUVkaXROYW1lKS5yZXNldFZhbGlkYXRpb24oKTtcbn0pO1xuXG5jbG9zZUJ1dHRvbkVkaXQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgZWRpdFBvcHVwLmNsb3NlKCk7XG59KTtcblxuLyoqIFBob3RvIHBvcHVwICovXG5cbmNsb3NlQnV0dG9uUGhvdG8uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgcGhvdG9Qb3B1cC5jbG9zZSgpO1xufSk7XG5cbi8qKiBFZGl0IGF2YXRhciBwb3B1cCAqL1xuZWRpdEF2YXRhckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBlZGl0QXZhdGFyUG9wdXAub3BlbigpO1xuICBmb3Jtcy5nZXQoZm9ybUVkaXRBdmF0YXJOYW1lKS5yZXNldFZhbGlkYXRpb24oKTtcbn0pO1xuXG5jbG9zZUJ1dHRvbkVkaXRBdmF0YXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgZWRpdEF2YXRhclBvcHVwLmNsb3NlKCk7XG59KTtcblxuLyoqIERlbGV0ZSBwb3B1cCAqL1xuY2xvc2VCdXR0b25EZWxldGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgZGVsZXRlUG9wdXAuY2xvc2UoKTtcbn0pO1xuXG5cblxuIiwiY2xhc3MgQXBpIHtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIHRoaXMuX29wdGlvbnMgPSBvcHRpb25zO1xuICAgIH1cblxuICAgIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICAgICAgcmV0dXJuIGZldGNoKHRoaXMuX29wdGlvbnMuYmFzZVVybCtcIi9jYXJkcy9cIiwge1xuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5fb3B0aW9ucy5oZWFkZXJzXG4gICAgICAgICAgfSlcbiAgICAgICAgICAudGhlbihyZXMgPT4ge1xuICAgICAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICAgIC50aGVuKCByZXMgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaCggZXJyID0+IHtcbiAgICAgICAgICAgIC8vIGlmIHRoZSBzZXJ2ZXIgcmV0dXJucyBhbiBlcnJvciwgcmVqZWN0IHRoZSBwcm9taXNlXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke2Vyci5zdGF0dXN9YCk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuZmluYWxseSAoICgpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQWxsIGRvbmVcIik7XG4gICAgICAgICAgfSlcblxuICAgIH1cblxuICAgIHNldE5ld0NhcmQoIHsgY2FyZE5hbWUsIGNhcmRMaW5rIH0pIHtcbiAgICAgIHJldHVybiBmZXRjaCh0aGlzLl9vcHRpb25zLmJhc2VVcmwrXCIvY2FyZHMvXCIsIHtcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgaGVhZGVyczogdGhpcy5fb3B0aW9ucy5oZWFkZXJzLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgbmFtZTogY2FyZE5hbWUsXG4gICAgICAgICAgbGluazogY2FyZExpbmtcbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgICAudGhlbihyZXMgPT4ge1xuICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLnRoZW4oIHJlcyA9PiB7XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKCBlcnIgPT4ge1xuICAgICAgICAvLyBpZiB0aGUgc2VydmVyIHJldHVybnMgYW4gZXJyb3IsIHJlamVjdCB0aGUgcHJvbWlzZVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke2Vyci5zdGF0dXN9YCk7XG4gICAgICB9KVxuICAgICAgLmZpbmFsbHkgKCAoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiQWxsIGRvbmVcIik7XG4gICAgICB9KVxuICAgIH1cblxuICAgIGFkZExpa2UoaWQpIHtcbiAgICAgIHJldHVybiBmZXRjaCh0aGlzLl9vcHRpb25zLmJhc2VVcmwrXCIvY2FyZHMvbGlrZXMvXCIraWQsIHtcbiAgICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9vcHRpb25zLmhlYWRlcnNcbiAgICAgIH0pXG4gICAgICAudGhlbihyZXMgPT4ge1xuICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLnRoZW4oIHJlcyA9PiB7XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKCBlcnIgPT4ge1xuICAgICAgICAvLyBpZiB0aGUgc2VydmVyIHJldHVybnMgYW4gZXJyb3IsIHJlamVjdCB0aGUgcHJvbWlzZVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke2Vyci5zdGF0dXN9YCk7XG4gICAgICB9KVxuICAgICAgLmZpbmFsbHkgKCAoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiQWxsIGRvbmVcIik7XG4gICAgICB9KVxuICAgIH1cblxuICAgIHJlbW92ZUxpa2UoaWQpIHtcbiAgICAgIHJldHVybiBmZXRjaCh0aGlzLl9vcHRpb25zLmJhc2VVcmwrXCIvY2FyZHMvbGlrZXMvXCIraWQsIHtcbiAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9vcHRpb25zLmhlYWRlcnNcbiAgICAgIH0pXG4gICAgICAudGhlbihyZXMgPT4ge1xuICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLnRoZW4oIHJlcyA9PiB7XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKCBlcnIgPT4ge1xuICAgICAgICAvLyBpZiB0aGUgc2VydmVyIHJldHVybnMgYW4gZXJyb3IsIHJlamVjdCB0aGUgcHJvbWlzZVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke2Vyci5zdGF0dXN9YCk7XG4gICAgICB9KVxuICAgICAgLmZpbmFsbHkgKCAoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiQWxsIGRvbmVcIik7XG4gICAgICB9KVxuICAgIH1cblxuICAgIGRlbGV0ZUNhcmQoaWQpIHtcbiAgICAgIHJldHVybiBmZXRjaCh0aGlzLl9vcHRpb25zLmJhc2VVcmwrXCIvY2FyZHMvXCIraWQsIHtcbiAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9vcHRpb25zLmhlYWRlcnNcbiAgICAgIH0pXG4gICAgICAudGhlbihyZXMgPT4ge1xuICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfSwgJHtyZXMuYm9keX1gKTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC50aGVuKCByZXMgPT4ge1xuICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCggZXJyID0+IHtcbiAgICAgICAgLy8gaWYgdGhlIHNlcnZlciByZXR1cm5zIGFuIGVycm9yLCByZWplY3QgdGhlIHByb21pc2VcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtlcnIuc3RhdHVzfSwgJHtlcnIuYm9keX1gKTtcbiAgICAgIH0pXG4gICAgICAuZmluYWxseSAoICgpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coXCJBbGwgZG9uZVwiKTtcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgZ2V0VXNlckluZm8oKSB7XG4gICAgICByZXR1cm4gZmV0Y2godGhpcy5fb3B0aW9ucy5iYXNlVXJsK1wiL3VzZXJzL21lXCIsIHtcbiAgICAgICAgaGVhZGVyczogdGhpcy5fb3B0aW9ucy5oZWFkZXJzXG4gICAgICB9KVxuICAgICAgLnRoZW4ocmVzID0+IHtcbiAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC50aGVuKCByZXMgPT4ge1xuICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCggZXJyID0+IHtcbiAgICAgICAgLy8gaWYgdGhlIHNlcnZlciByZXR1cm5zIGFuIGVycm9yLCByZWplY3QgdGhlIHByb21pc2VcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtlcnIuc3RhdHVzfWApO1xuICAgICAgfSlcbiAgICAgIC5maW5hbGx5ICggKCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhcIkFsbCBkb25lXCIpO1xuICAgICAgfSlcblxuICAgIH1cblxuICAgIHNldFVzZXJJbmZvKCB7IG5ld05hbWUsIG5ld0Fib3V0IH0pIHtcbiAgICAgIHJldHVybiBmZXRjaCh0aGlzLl9vcHRpb25zLmJhc2VVcmwrXCIvdXNlcnMvbWVcIiwge1xuICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgICAgaGVhZGVyczogdGhpcy5fb3B0aW9ucy5oZWFkZXJzLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgbmFtZTogbmV3TmFtZSxcbiAgICAgICAgICBhYm91dDogbmV3QWJvdXRcbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgICAudGhlbihyZXMgPT4ge1xuICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLnRoZW4oIHJlcyA9PiB7XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKCBlcnIgPT4ge1xuICAgICAgICAvLyBpZiB0aGUgc2VydmVyIHJldHVybnMgYW4gZXJyb3IsIHJlamVjdCB0aGUgcHJvbWlzZVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke2Vyci5zdGF0dXN9YCk7XG4gICAgICB9KVxuICAgICAgLmZpbmFsbHkgKCAoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiQWxsIGRvbmVcIik7XG4gICAgICB9KVxuXG4gICAgfVxuXG4gICAgdXBkYXRlQXZhdGFyKGxpbmspIHtcbiAgICAgIHJldHVybiBmZXRjaCh0aGlzLl9vcHRpb25zLmJhc2VVcmwrXCIvdXNlcnMvbWUvYXZhdGFyXCIsIHtcbiAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX29wdGlvbnMuaGVhZGVycyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIGF2YXRhcjogbGlua1xuICAgICAgICB9KVxuICAgICAgfSlcbiAgICAgIC50aGVuKHJlcyA9PiB7XG4gICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAudGhlbiggcmVzID0+IHtcbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goIGVyciA9PiB7XG4gICAgICAgIC8vIGlmIHRoZSBzZXJ2ZXIgcmV0dXJucyBhbiBlcnJvciwgcmVqZWN0IHRoZSBwcm9taXNlXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7ZXJyLnN0YXR1c31gKTtcbiAgICAgIH0pXG4gICAgICAuZmluYWxseSAoICgpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coXCJBbGwgZG9uZVwiKTtcbiAgICAgIH0pXG5cbiAgICB9XG5cbn1cblxuZXhwb3J0IHsgQXBpIH07XG4iLCJjbGFzcyBVc2VySW5mbyB7XG4gICAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGpvYlNlbGVjdG9yLCBhdmF0YXJTZWxlY3RvciB9KSB7XG4gICAgICAgIHRoaXMuX25hbWVTZWxlY3RvciA9IG5hbWVTZWxlY3RvcjtcbiAgICAgICAgdGhpcy5fam9iU2VsZWN0b3IgPSBqb2JTZWxlY3RvcjtcbiAgICAgICAgdGhpcy5fYXZhdGFyU2VsZWN0b3IgPSBhdmF0YXJTZWxlY3RvcjtcbiAgICB9XG5cbiAgICBnZXRVc2VySW5mbygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5hbWU6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fbmFtZVNlbGVjdG9yKS50ZXh0Q29udGVudCxcbiAgICAgICAgICAgIGpvYjogZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9qb2JTZWxlY3RvcikudGV4dENvbnRlbnQsXG4gICAgICAgICAgICBhdmF0YXI6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fYXZhdGFyU2VsZWN0b3IpLnNyYyxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBzZXRVc2VySW5mbyggeyBuYW1lLCBhYm91dCwgX2lkLCBhdmF0YXIgfSApIHtcbiAgICAgICAgY29uc3QgbmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX25hbWVTZWxlY3Rvcik7XG4gICAgICAgIGNvbnN0IGpvYkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2pvYlNlbGVjdG9yKTtcbiAgICAgICAgY29uc3QgYXZhdGFyRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fYXZhdGFyU2VsZWN0b3IpO1xuXG4gICAgICAgIG5hbWVFbGVtZW50LnRleHRDb250ZW50ID0gbmFtZTtcbiAgICAgICAgam9iRWxlbWVudC50ZXh0Q29udGVudCA9IGFib3V0O1xuICAgICAgICBhdmF0YXJFbGVtZW50LnNyYyA9IGF2YXRhcjtcbiAgICAgICAgdGhpcy5faWQgPSBfaWQ7XG4gICAgfVxufVxuXG5leHBvcnQgeyBVc2VySW5mbyB9O1xuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5jbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIH1cblxuICAgIG9wZW4ocGhvdG9JbWFnZSwgbmFtZSkge1xuICAgICAgICBjb25zdCBwaG90b0NvbnRhaW5lciA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cC1waG90b19fY29udGFpbmVyJyk7XG4gICAgICAgIGNvbnN0IHBob3RvID0gcGhvdG9Db250YWluZXIucXVlcnlTZWxlY3RvcignLnBvcHVwLXBob3RvX19waG90bycpO1xuICAgICAgICBjb25zdCB0aXRsZSA9IHBob3RvQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cC1waG90b19fdGl0bGUnKTtcblxuICAgICAgICBwaG90by5zcmMgPSBwaG90b0ltYWdlO1xuICAgICAgICB0aXRsZS50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgICAgIHBob3RvLmFsdCA9IG5hbWU7XG4gICAgICAgIHN1cGVyLm9wZW4oKTtcbiAgICB9XG59XG5cbmV4cG9ydCB7IFBvcHVwV2l0aEltYWdlIH07Il0sIm5hbWVzIjpbIkZvcm1WYWxpZGF0b3IiLCJjb25zdHJ1Y3RvciIsInNldHRpbmdzIiwiZm9ybSIsInRoaXMiLCJfc2V0dGluZ3MiLCJfZm9ybSIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJpZCIsImNsYXNzTGlzdCIsImFkZCIsImlucHV0RXJyb3JDbGFzcyIsInRleHRDb250ZW50IiwiZXJyb3JDbGFzcyIsIl9oaWRlSW5wdXRFcnJvciIsInJlbW92ZSIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGFzSW52YWxpZElucHV0IiwiX2lucHV0TGlzdCIsInNvbWUiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfYnV0dG9uRWxlbWVudCIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiZm9yRWFjaCIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZXNldFZhbGlkYXRpb24iLCJlbmFibGVWYWxpZGF0aW9uIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJkb2N1bWVudCIsIkNhcmQiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVDYXJkQ2xpY2siLCJoYW5kbGVEZWxldGVDYXJkQ2xpY2siLCJoYW5kbGVMaWtlQ2xpY2siLCJfaWQiLCJuYW1lIiwibGluayIsImxpa2VzIiwiX2VsZW1lbnQiLCJjb250YWlucyIsIl9oYW5kbGVMaWtlQ2xpY2siLCJfaGFuZGxlRGVsZXRlQ2FyZENsaWNrIiwiX25hbWUiLCJfaW1hZ2UiLCJfbGlrZXMiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUNhcmRDbGljayIsImdldElkIiwiY3JlYXRlQ2FyZCIsIl9jcmVhdGVOZXdQaG90b0NhcmRFbGVtZW50IiwiX2FkZEV2ZW50TGlzdGVuZXJzIiwiZGVsZXRlQ2FyZCIsInVwZGF0ZUxpa2VzIiwidXNlcklkIiwibGlrZUJ1dHRvbiIsImxlbmd0aCIsIkpTT04iLCJzdHJpbmdpZnkiLCJpbmNsdWRlcyIsIl9hZGRMaWtlRXZlbnRMaXN0ZW5lciIsImRlbGV0ZUJ1dHRvbiIsIl9hZGREZWxldGVFdmVudExpc3RlbmVyIiwicGhvdG8iLCJfYWRkT3BlblBob3RvRXZlbnRMaXN0ZW5lciIsInBob3RvQ2FyZCIsImNsb25lTm9kZSIsInBob3RvVGl0bGUiLCJwaG90b0xpa2VzIiwic3JjIiwiYWx0IiwiX2hhbmRsZUxpa2VFdmVudCIsIl9oYW5kbGVEZWxldGVFdmVudCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsImtleSIsIl9wb3B1cCIsImNsb3NlIiwidGFyZ2V0Iiwib3BlbiIsInNldEV2ZW50TGlzdGVuZXJzIiwicmVtb3ZlRXZlbnRMaXN0ZW5lcnMiLCJfaGFuZGxlQ2xpY2tPbk92ZXJsYXlDbG9zZSIsIl9oYW5kbGVFc2NDbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlU3VibWl0Iiwic3VwZXIiLCJfaGFuZGxlU3VibWl0IiwiX3N1Ym1pdEJ1dHRvbiIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0VmFsdWVzIiwiaW5wdXQiLCJnZXRBdHRyaWJ1dGUiLCJ2YWx1ZSIsIl9oYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCIsInJlc2V0IiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJjbGVhciIsImlubmVySFRNTCIsIml0ZW0iLCJhZGRJdGVtIiwicHJlcGVuZCIsInBvcHVwRWRpdCIsInBvcHVwQWRkIiwicG9wdXBQaG90byIsInBvcHVwRGVsZXRlIiwicG9wdXBFZGl0QXZhdGFyIiwiY2xvc2VCdXR0b25FZGl0IiwiY2xvc2VCdXR0b25BZGQiLCJjbG9zZUJ1dHRvblBob3RvIiwiY2xvc2VCdXR0b25EZWxldGUiLCJjbG9zZUJ1dHRvbkVkaXRBdmF0YXIiLCJmb3JtRWRpdCIsIm5hbWVJbnB1dCIsImRlc2NyaXB0aW9uSW5wdXQiLCJmb3JtQWRkIiwidGl0bGVJbnB1dCIsImxpbmtJbnB1dCIsImF2YXRhckxpbmtJbnB1dCIsInByb2ZpbGUiLCJlZGl0QnV0dG9uIiwiYWRkQnV0dG9uIiwiZWRpdEF2YXRhckJ1dHRvbiIsInBob3RvQ2FyZFRlbXBsYXRlIiwiY29udGVudCIsImZvcm1zIiwiTWFwIiwiY2FyZFRvRGVsZXRlIiwidmFsaWRhdGlvbkNvbmZpZyIsImZvcm1TZWxlY3RvciIsInJlbmRlckNhcmQiLCJjYXJkIiwibmV3Q2FyZCIsImhhbmRsZUNhcmREZWxldGVDbGljayIsInVzZXJJbmZvIiwicGhvdG9Qb3B1cCIsImRlbGV0ZVBvcHVwIiwiaXNMaWtlZCIsImFwaSIsImFkZExpa2UiLCJ0aGVuIiwicmVzIiwiY29uc29sZSIsImxvZyIsInJlbW92ZUxpa2UiLCJvcHRpb25zIiwiX29wdGlvbnMiLCJnZXRJbml0aWFsQ2FyZHMiLCJmZXRjaCIsImJhc2VVcmwiLCJoZWFkZXJzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImNhdGNoIiwiZXJyIiwiZmluYWxseSIsInNldE5ld0NhcmQiLCJjYXJkTmFtZSIsImNhcmRMaW5rIiwibWV0aG9kIiwiYm9keSIsImdldFVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJuZXdOYW1lIiwibmV3QWJvdXQiLCJhYm91dCIsInVwZGF0ZUF2YXRhciIsImF2YXRhciIsImF1dGhvcml6YXRpb24iLCJuYW1lU2VsZWN0b3IiLCJqb2JTZWxlY3RvciIsImF2YXRhclNlbGVjdG9yIiwiX25hbWVTZWxlY3RvciIsIl9qb2JTZWxlY3RvciIsIl9hdmF0YXJTZWxlY3RvciIsImpvYiIsIm5hbWVFbGVtZW50Iiwiam9iRWxlbWVudCIsImF2YXRhckVsZW1lbnQiLCJzZWN0aW9uIiwiYWRkUG9wdXAiLCJlZGl0UG9wdXAiLCJwaG90b0ltYWdlIiwicGhvdG9Db250YWluZXIiLCJ0aXRsZSIsImVkaXRBdmF0YXJQb3B1cCIsImZvcm1FbGVtZW50IiwiZm9ybU5hbWUiLCJmb3JtVmFsaWRhdG9yIiwic2V0IiwiZ2V0IiwiY3VycmVudFVzZXJJbmZvIl0sInNvdXJjZVJvb3QiOiIifQ==