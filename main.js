!function(){"use strict";class e{constructor(e,t){this._settings=e,this._form=t}_showInputError(e,t){const o=this._form.querySelector(".".concat(e.id,"-error"));e.classList.add(this._settings.inputErrorClass),o.textContent=t,o.classList.add(this._settings.errorClass)}_hideInputError(e){const t=this._form.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._settings.inputErrorClass),t.classList.remove(this._settings.errorClass),t.textContent=""}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}_toggleButtonState(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._settings.inactiveButtonClass),this._buttonElement.setAttribute("disabled",!0)):(this._buttonElement.classList.remove(this._settings.inactiveButtonClass),this._buttonElement.removeAttribute("disabled"))}_setEventListeners(){this._inputList=Array.from(this._form.querySelectorAll(this._settings.inputSelector)),this._buttonElement=this._form.querySelector(this._settings.submitButtonSelector),this._toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}resetValidation(){this._inputList.forEach((e=>{this._hideInputError(e),this._toggleButtonState()}))}enableValidation(){this._setEventListeners(this._form),this._form.addEventListener("submit",(function(e){e.preventDefault()}))}}function t(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}document.querySelector(".popup-photo");class o{constructor(e,o,n){let{name:r,link:s}=e;t(this,"_handleLikeEvent",(()=>{this._element.querySelector(".photo-card__like-button").classList.toggle("photo-card__like-button_active")})),t(this,"_handleDeleteEvent",(()=>{this._element.remove(),this._element=null})),this._name=r,this._image=s,this._cardSelector=o,this._handleCardClick=n}createCard(){return this._element=this._createNewPhotoCardElement(),this._addEventListeners(),this._element}_addEventListeners(){const e=this._element.querySelector(".photo-card__like-button");this._addLikeEventListener(e);const t=this._element.querySelector(".photo-card__delete-button");this._addDeleteEventListener(t);const o=this._element.querySelector(".photo-card__photo");this._addOpenPhotoEventListener(o)}_createNewPhotoCardElement(){const e=this._cardSelector.querySelector(".photo-card").cloneNode(!0),t=e.querySelector(".photo-card__photo"),o=e.querySelector(".photo-card__title");return t.src=this._image,t.alt=this._name,o.textContent=this._name,e}_addLikeEventListener(e){e.addEventListener("click",this._handleLikeEvent)}_addDeleteEventListener(e){e.addEventListener("click",this._handleDeleteEvent)}_addOpenPhotoEventListener(e){e.addEventListener("click",(()=>{this._handleCardClick()}))}}function n(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class r{constructor(e){n(this,"_handleEscClose",(e=>{"Escape"==e.key&&this._popup.classList.contains("popup_opened")&&this.close()})),n(this,"_handleClickOnOverlayClose",(e=>{e.target.classList.contains("popup")&&this.close()})),this._popup=document.querySelector(e)}open(){this._popup.classList.add("popup_opened"),this.setEventListeners()}close(){this._popup.classList.remove("popup_opened"),this.removeEventListeners()}setEventListeners(){document.addEventListener("click",this._handleClickOnOverlayClose),document.addEventListener("keydown",this._handleEscClose),this._popup.querySelector(".popup__close-button").addEventListener("click",close)}removeEventListeners(){document.removeEventListener("click",this._handleClickOnOverlayClose),document.removeEventListener("keydown",this._handleEscClose),this._popup.querySelector(".popup__close-button").removeEventListener("click",close)}}class s extends r{constructor(e,t){var o,n;super(e),n=e=>{e.preventDefault(),this._handleSubmit(),this.close()},(o="_handleProfileFormSubmit")in this?Object.defineProperty(this,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[o]=n,this._handleSubmit=t,this._form=this._popup.querySelector(".form")}_getInputValues(){const e={};return Array.from(this._popup.querySelectorAll(".form__text-input")).forEach((t=>{e[t.getAttribute("name")]=t.value})),e}setEventListeners(){this._form.addEventListener("submit",this._handleProfileFormSubmit),super.setEventListeners()}removeEventListeners(){this._form.removeEventListener("submit",this._handleProfileFormSubmit),super.removeEventListeners()}close(){this._form.reset(),super.close()}}const i=document.querySelector(".popup-edit"),l=document.querySelector(".popup-add"),a=document.querySelector(".popup-photo"),c=i.querySelector(".popup__close-button"),u=l.querySelector(".popup__close-button"),d=a.querySelector(".popup__close-button"),_=i.querySelector(".form"),p=_.querySelector('.form__text-input[name="name"]'),h=_.querySelector('.form__text-input[name="about-me"]'),m=l.querySelector(".form"),v=m.querySelector('.form__text-input[name="title"]'),b=m.querySelector('.form__text-input[name="image-link"]'),S=document.querySelector(".profile"),f=S.querySelector(".profile__edit-button"),y=S.querySelector(".profile__add-button"),E=document.querySelector("#photo-card__template").content,L=new Map,g={formSelector:".form",inputSelector:".form__text-input",submitButtonSelector:".form__submit-button",inactiveButtonClass:"form__submit-button_disabled",inputErrorClass:"form__text-input-error_active",errorClass:"form__input-error_visible"};function q(){x.open(this._image,this._name)}const k=new class{constructor(e){let{nameSelector:t,jobSelector:o}=e;this._nameSelector=t,this._jobSelector=o}getUserInfo(){return{name:document.querySelector(this._nameSelector).textContent,job:document.querySelector(this._jobSelector).textContent}}setUserInfo(e){let{newName:t,newJob:o}=e;const n=document.querySelector(this._nameSelector),r=document.querySelector(this._jobSelector);n.textContent=t,r.textContent=o}}({nameSelector:".profile__name",jobSelector:".profile__description"});k.setUserInfo({newName:"Jacques Cousteau",newJob:"Explorer"});const C=new s(".popup-add",(function(){const e={name:v.value,link:b.value},t=new o(e,E,q);I.addItem(t.createCard())})),w=new s(".popup-edit",(function(){k.setUserInfo({newName:p.value,newJob:h.value})})),x=new class extends r{constructor(e){super(e)}open(e,t){const o=this._popup.querySelector(".popup-photo__container"),n=o.querySelector(".popup-photo__photo"),r=o.querySelector(".popup-photo__title");n.src=e,r.textContent=t,n.alt=t,super.open()}}(".popup-photo"),I=new class{constructor(e,t){let{items:o,renderer:n}=e;this._items=o,this._renderer=n,this._container=document.querySelector(t)}clear(){this._container.innerHTML=""}renderer(){this.clear(),this._items.forEach((e=>{this.addItem(this._renderer(e))}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{name:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}],renderer:function(e){return new o(e,E,q).createCard()}},".photos__grid");I.renderer(),Array.from(document.querySelectorAll(g.formSelector)).forEach((t=>{const o=t.getAttribute("name"),n=new e(g,t);n.enableValidation(),L.set(o,n)})),y.addEventListener("click",(()=>{C.open(),L.get("add-form").resetValidation()})),u.addEventListener("click",(()=>{C.close()})),f.addEventListener("click",(()=>{const e=k.getUserInfo();p.value=e.name,h.value=e.job,w.open(),L.get("edit-form").resetValidation()})),c.addEventListener("click",(()=>{w.close()})),d.addEventListener("click",(()=>{x.close()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNwQ3lELEVBQWdCLElBQUlySixFQUFjbUgsRUFBa0JnQyxHQUMxREUsRUFBYzVHLG1CQUNkd0UsRUFBTXFDLElBQUlGLEVBQVVDLE1Ba0N4QnZDLEVBQVV2RSxpQkFBaUIsU0FBUyxLQUNsQ3lGLEVBQVNqRCxPQUNUa0MsRUFBTXNDLElBOUlZLFlBOElLL0cscUJBR3pCNEQsRUFBZTdELGlCQUFpQixTQUFTLEtBQ3ZDeUYsRUFBU25ELFdBS1hnQyxFQUFXdEUsaUJBQWlCLFNBQVMsS0FDbkMsTUFBTWlILEVBQWtCbEMsRUFBU0ssY0FDakNwQixFQUFVVixNQUFRMkQsRUFBZ0J4RyxLQUNsQ3dELEVBQWlCWCxNQUFRMkQsRUFBZ0I1QixJQUN6Q1MsRUFBVXRELE9BQ1ZrQyxFQUFNc0MsSUE3SmEsYUE2SksvRyxxQkFHMUIyRCxFQUFnQjVELGlCQUFpQixTQUFTLEtBQ3hDOEYsRUFBVXhELFdBS1p3QixFQUFpQjlELGlCQUFpQixTQUFTLEtBQ3pDOEUsRUFBV3hDLFciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtKXtcclxuICAgIHRoaXMuX3NldHRpbmdzID0gc2V0dGluZ3M7XHJcbiAgICB0aGlzLl9mb3JtID0gZm9ybTtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9zZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuZXJyb3JDbGFzcyk7XHJcbiAgfTtcclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3MuZXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gIH07XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgdHJ1ZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fc2V0dGluZ3MuaW5wdXRTZWxlY3RvcikpO1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9zZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcblxyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCl7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycyh0aGlzLl9mb3JtKTtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBmdW5jdGlvbiAoZXZ0KSB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcbiAgfTtcclxufVxyXG5cclxuXHJcbmV4cG9ydCB7Rm9ybVZhbGlkYXRvcn07XHJcbiIsIlxyXG5jb25zdCBwb3B1cFBob3RvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwLXBob3RvJyk7XHJcblxyXG5cclxuY2xhc3MgQ2FyZCB7XHJcblxyXG4gICAgY29uc3RydWN0b3IoeyBuYW1lLCBsaW5rIH0sIGNhcmRTZWxlY3RvciwgaGFuZGxlQ2FyZENsaWNrKSB7XHJcblxyXG4gICAgICAgIHRoaXMuX25hbWUgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMuX2ltYWdlID0gbGluaztcclxuICAgICAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xyXG4gICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAqIENyZWF0ZXMgb25lIHNpbmdsZSBwaG90byBjYXJkIHdpdGggc3BlY2lmaWVkIGNhcmQgaW5mb3JtYXRpb24gKG9iamVjdClcclxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBjYXJkXHJcbiAgICAgKiBAcmV0dXJucyBwaG90b0NhcmQgdG8gYmUgcmVuZGVyZWRcclxuICAgICAqL1xyXG4gICAgY3JlYXRlQ2FyZCgpIHtcclxuICAgICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2NyZWF0ZU5ld1Bob3RvQ2FyZEVsZW1lbnQoKTtcclxuICAgICAgdGhpcy5fYWRkRXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIF9hZGRFdmVudExpc3RlbmVycygpe1xyXG5cclxuICAgICAgICBjb25zdCBsaWtlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBob3RvLWNhcmRfX2xpa2UtYnV0dG9uXCIpO1xyXG4gICAgICAgIHRoaXMuX2FkZExpa2VFdmVudExpc3RlbmVyKGxpa2VCdXR0b24pO1xyXG5cclxuICAgICAgICBjb25zdCBkZWxldGVCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGhvdG8tY2FyZF9fZGVsZXRlLWJ1dHRvblwiKTtcclxuICAgICAgICB0aGlzLl9hZGREZWxldGVFdmVudExpc3RlbmVyKGRlbGV0ZUJ1dHRvbik7XHJcblxyXG4gICAgICAgIGNvbnN0IHBob3RvID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBob3RvLWNhcmRfX3Bob3RvXCIpO1xyXG4gICAgICAgIHRoaXMuX2FkZE9wZW5QaG90b0V2ZW50TGlzdGVuZXIocGhvdG8pO1xyXG4gICAgfVxyXG5cclxuICAgIF9jcmVhdGVOZXdQaG90b0NhcmRFbGVtZW50KCkge1xyXG4gICAgICAgIGNvbnN0IHBob3RvQ2FyZCA9IHRoaXMuX2NhcmRTZWxlY3Rvci5xdWVyeVNlbGVjdG9yKFwiLnBob3RvLWNhcmRcIikuY2xvbmVOb2RlKHRydWUpO1xyXG5cclxuICAgICAgICBjb25zdCBwaG90byA9IHBob3RvQ2FyZC5xdWVyeVNlbGVjdG9yKFwiLnBob3RvLWNhcmRfX3Bob3RvXCIpO1xyXG4gICAgICAgIGNvbnN0IHBob3RvVGl0bGUgPSBwaG90b0NhcmQucXVlcnlTZWxlY3RvcihcIi5waG90by1jYXJkX190aXRsZVwiKTtcclxuXHJcbiAgICAgICAgcGhvdG8uc3JjID0gdGhpcy5faW1hZ2U7XHJcbiAgICAgICAgcGhvdG8uYWx0ID0gdGhpcy5fbmFtZTtcclxuICAgICAgICBwaG90b1RpdGxlLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHBob3RvQ2FyZDtcclxuICAgIH1cclxuXHJcbiAgICAvKlxyXG4gICAgS2VlcGluZyBjb21tZW50IGZvciBsZWFybmluZyBwdXJwb3Nlc1xyXG4gICAgZGVjbGFyZSBtZXRob2RzIGFzIGFycm93IGZ1bmN0aW9ucyB0byBub3QgbG9zZSBjb250ZXh0IGB0aGlzYC4gYHRoaXNgIGlzIENhcmQgaW5zdGFuY2UgaGVyZVxyXG4gICAgKi9cclxuICAgIF9oYW5kbGVMaWtlRXZlbnQgPSAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGxpa2VCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGhvdG8tY2FyZF9fbGlrZS1idXR0b25cIik7XHJcbiAgICAgIGxpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZSgncGhvdG8tY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlJyk7XHJcbiAgICB9XHJcblxyXG4gICAgX2FkZExpa2VFdmVudExpc3RlbmVyKGxpa2VCdXR0b24pIHtcclxuICAgICAgICBsaWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVMaWtlRXZlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIF9oYW5kbGVEZWxldGVFdmVudCA9ICgpID0+IHtcclxuICAgICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcclxuICAgICAgdGhpcy5fZWxlbWVudCA9IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgX2FkZERlbGV0ZUV2ZW50TGlzdGVuZXIoZGVsZXRlQnV0dG9uKSB7XHJcbiAgICAgICAgZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVEZWxldGVFdmVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgX2FkZE9wZW5QaG90b0V2ZW50TGlzdGVuZXIocGhvdG8pIHtcclxuICAgICAgICBwaG90by5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5leHBvcnQge0NhcmR9XHJcbiIsImNsYXNzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgICAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB9XHJcblxyXG4gICAgb3BlbigpIHtcclxuICAgICAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfb3BlbmVkXCIpO1xyXG4gICAgICAgIHRoaXMuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIH1cclxuXHJcbiAgICBjbG9zZSgpIHtcclxuICAgICAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfb3BlbmVkXCIpO1xyXG4gICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZUNsaWNrT25PdmVybGF5Q2xvc2UpO1xyXG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICAgIHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2xvc2UtYnV0dG9uJykuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsb3NlKTtcclxuICAgIH1cclxuXHJcbiAgICByZW1vdmVFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZUNsaWNrT25PdmVybGF5Q2xvc2UpO1xyXG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICAgIHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2xvc2UtYnV0dG9uJykucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsb3NlKTtcclxuICAgIH1cclxuXHJcbiAgICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XHJcbiAgICAgICAgaWYoZXZ0LmtleSA9PSBcIkVzY2FwZVwiICYmIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfb3BlbmVkJykpe1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9oYW5kbGVDbGlja09uT3ZlcmxheUNsb3NlID0gKGV2dCkgPT4ge1xyXG4gICAgICAgIGlmKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBcIikpe1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgfVxyXG4gIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCB7UG9wdXB9O1xyXG4iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5jbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlU3VibWl0KSB7XHJcbiAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVTdWJtaXQgPSBoYW5kbGVTdWJtaXQ7XHJcbiAgICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcuZm9ybScpO1xyXG4gICAgfVxyXG5cclxuICAgIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgICAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHt9O1xyXG4gICAgICAgIGNvbnN0IGlucHV0cyA9IEFycmF5LmZyb20odGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvckFsbChcIi5mb3JtX190ZXh0LWlucHV0XCIpKTtcclxuXHJcbiAgICAgICAgaW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgICAgICAgIGlucHV0VmFsdWVzW2lucHV0LmdldEF0dHJpYnV0ZSgnbmFtZScpXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gaW5wdXRWYWx1ZXM7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLl9oYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCk7XHJcbiAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgIHRoaXMuX2Zvcm0ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLl9oYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCk7XHJcbiAgICAgIHN1cGVyLnJlbW92ZUV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xvc2UoKSB7XHJcbiAgICAgICAgdGhpcy5fZm9ybS5yZXNldCgpO1xyXG4gICAgICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgX2hhbmRsZVByb2ZpbGVGb3JtU3VibWl0ID0gKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlU3VibWl0KCk7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHsgUG9wdXBXaXRoRm9ybSB9XHJcbiIsImltcG9ydCBcIi4vc3R5bGVzL2luZGV4LmNzc1wiO1xyXG5cclxuaW1wb3J0IHsgRm9ybVZhbGlkYXRvciB9IGZyb20gXCIuL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgeyBDYXJkIH0gZnJvbSBcIi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCB7IFBvcHVwV2l0aEZvcm0gfSBmcm9tIFwiLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IHsgUG9wdXBXaXRoSW1hZ2UgfSBmcm9tIFwiLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCB7IFVzZXJJbmZvIH0gZnJvbSBcIi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiXHJcbmltcG9ydCB7IFNlY3Rpb24gfSBmcm9tIFwiLi9jb21wb25lbnRzL1NlY3Rpb25cIjtcclxuXHJcbi8vVE9ETyBob3cgdG8gdXNlIGl0IG9uIFBvcHVwRm9ybSB3aGVuIG9wZW5pbmcgaXQsIHRvIHJldHJpZXZlIHRoZSBpbmZvLlxyXG5jb25zdCB1c2VyU2VsZWN0b3JzID0ge1xyXG4gIG5hbWVTZWxlY3RvcjogXCIucHJvZmlsZV9fbmFtZVwiLFxyXG4gIGpvYlNlbGVjdG9yOiBcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiXHJcbn07XHJcblxyXG5jb25zdCBpbml0aWFsVXNlckluZm8gPSB7XHJcbiAgbmV3TmFtZTogXCJKYWNxdWVzIENvdXN0ZWF1XCIsXHJcbiAgbmV3Sm9iOiBcIkV4cGxvcmVyXCJcclxufTtcclxuXHJcbi8qKiBEZWNsYXJhdGlvbiBvZiB0aGUgUG9wdXBzICovXHJcbmNvbnN0IHBvcHVwRWRpdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cC1lZGl0Jyk7XHJcbmNvbnN0IHBvcHVwQWRkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwLWFkZCcpO1xyXG5jb25zdCBwb3B1cFBob3RvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwLXBob3RvJyk7XHJcblxyXG4vKiogRGVjbGFyYXRpb24gb2YgdGhlIENsb3NlIEJ1dHRvbnMgKi9cclxuY29uc3QgY2xvc2VCdXR0b25FZGl0ID0gcG9wdXBFZGl0LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2xvc2UtYnV0dG9uJyk7XHJcbmNvbnN0IGNsb3NlQnV0dG9uQWRkID0gcG9wdXBBZGQucXVlcnlTZWxlY3RvcignLnBvcHVwX19jbG9zZS1idXR0b24nKTtcclxuY29uc3QgY2xvc2VCdXR0b25QaG90byA9IHBvcHVwUGhvdG8ucXVlcnlTZWxlY3RvcignLnBvcHVwX19jbG9zZS1idXR0b24nKTtcclxuXHJcbi8qKiBEZWNsYXJhdGlvbiBvZiB0aGUgRm9ybXMgKi9cclxuXHJcbmNvbnN0IGZvcm1FZGl0TmFtZSA9ICdlZGl0LWZvcm0nO1xyXG5jb25zdCBmb3JtQWRkTmFtZSA9ICdhZGQtZm9ybSc7XHJcblxyXG5jb25zdCBmb3JtRWRpdCA9IHBvcHVwRWRpdC5xdWVyeVNlbGVjdG9yKCcuZm9ybScpO1xyXG5jb25zdCBuYW1lSW5wdXQgPSBmb3JtRWRpdC5xdWVyeVNlbGVjdG9yKCcuZm9ybV9fdGV4dC1pbnB1dFtuYW1lPVwibmFtZVwiXScpO1xyXG5jb25zdCBkZXNjcmlwdGlvbklucHV0ID0gZm9ybUVkaXQucXVlcnlTZWxlY3RvcignLmZvcm1fX3RleHQtaW5wdXRbbmFtZT1cImFib3V0LW1lXCJdJyk7XHJcblxyXG5jb25zdCBmb3JtQWRkID0gcG9wdXBBZGQucXVlcnlTZWxlY3RvcignLmZvcm0nKTtcclxuY29uc3QgdGl0bGVJbnB1dCA9IGZvcm1BZGQucXVlcnlTZWxlY3RvcignLmZvcm1fX3RleHQtaW5wdXRbbmFtZT1cInRpdGxlXCJdJyk7XHJcbmNvbnN0IGxpbmtJbnB1dCA9IGZvcm1BZGQucXVlcnlTZWxlY3RvcignLmZvcm1fX3RleHQtaW5wdXRbbmFtZT1cImltYWdlLWxpbmtcIl0nKTtcclxuXHJcbmNvbnN0IHByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZScpO1xyXG5jb25zdCBlZGl0QnV0dG9uID0gcHJvZmlsZS5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xyXG5jb25zdCBhZGRCdXR0b24gPSBwcm9maWxlLnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcclxuXHJcbi8qKiBEZWNsYXJhdGlvbiBvZiB0aGUgUGhvdG9zICovXHJcbmNvbnN0IHBob3RvR3JpZFNlbGVjdG9yID0gXCIucGhvdG9zX19ncmlkXCI7XHJcbmNvbnN0IHBob3RvQ2FyZFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwaG90by1jYXJkX190ZW1wbGF0ZVwiKS5jb250ZW50O1xyXG5cclxuLyoqIERlY2xhcmF0aW9uIG9mIHRoZSBJbml0aWFsIENhcmRzICovXHJcbmNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICB7XHJcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS95b3NlbWl0ZS5qcGdcIlxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWtlLWxvdWlzZS5qcGdcIlxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9iYWxkLW1vdW50YWlucy5qcGdcIlxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhdGVtYXIuanBnXCJcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3Zhbm9pc2UuanBnXCJcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFnby5qcGdcIlxyXG4gIH1cclxuXTtcclxuXHJcbmNvbnN0IGZvcm1zID0gbmV3IE1hcCgpO1xyXG5cclxuLyoqIERlY2xhcmF0aW9uIG9mIHRoZSBTZXR0aW5nIG9iamVjdCBmb3IgY2FyZCB2YWxpZGF0aW9uICovXHJcbmNvbnN0IHZhbGlkYXRpb25Db25maWcgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIuZm9ybV9fdGV4dC1pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5mb3JtX19zdWJtaXQtYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJmb3JtX19zdWJtaXQtYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcImZvcm1fX3RleHQtaW5wdXQtZXJyb3JfYWN0aXZlXCIsXHJcbiAgZXJyb3JDbGFzczogXCJmb3JtX19pbnB1dC1lcnJvcl92aXNpYmxlXCJcclxufTtcclxuXHJcblxyXG4vKipcclxuICogSGFuZGxlcyBjYXJkIGNyZWF0aW9uIG9uIFNlY3Rpb25cclxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgLSBUaGUgdGl0bGUgb2YgdGhlIGNhcmRcclxuICogQHBhcmFtIHtzdHJpbmd9IGxpbmsgLSBUaGUgbGluayBvZiB0aGUgcGhvdG9cclxuICovXHJcbmZ1bmN0aW9uIHJlbmRlckNhcmQoY2FyZCkge1xyXG4gIGNvbnN0IG5ld0NhcmQgPSBuZXcgQ2FyZChjYXJkLCBwaG90b0NhcmRUZW1wbGF0ZSwgaGFuZGxlQ2FyZENsaWNrKTtcclxuICBjb25zdCBwaG90b0NhcmQgPSBuZXdDYXJkLmNyZWF0ZUNhcmQoKTtcclxuICByZXR1cm4gcGhvdG9DYXJkO1xyXG59XHJcblxyXG4vKipcclxuICogSGFuZGxlcyBuZXcgcGxhY2UgZm9ybSBzdWJtaXQgKFNlbnQgdG8gcG9wdXBXaXRoRm9ybSlcclxuICovXHJcbmZ1bmN0aW9uIGhhbmRsZU5ld1BsYWNlRm9ybVN1Ym1pdCgpIHtcclxuICBjb25zdCBjYXJkID0ge1xyXG4gICAgbmFtZTogdGl0bGVJbnB1dC52YWx1ZSxcclxuICAgIGxpbms6IGxpbmtJbnB1dC52YWx1ZVxyXG4gIH07XHJcbiAgY29uc3QgbmV3Q2FyZCA9IG5ldyBDYXJkKGNhcmQsIHBob3RvQ2FyZFRlbXBsYXRlLCBoYW5kbGVDYXJkQ2xpY2spO1xyXG4gIHNlY3Rpb24uYWRkSXRlbShuZXdDYXJkLmNyZWF0ZUNhcmQoKSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBIYW5kbGVzIG5ldyBwcm9maWxlIGZvcm0gc3VibWl0IChTZW50IHRvIHBvcHVwV2l0aEZvcm0pXHJcbiAqL1xyXG5mdW5jdGlvbiBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCgpIHtcclxuICB1c2VySW5mby5zZXRVc2VySW5mbyggeyBuZXdOYW1lOiBuYW1lSW5wdXQudmFsdWUsIG5ld0pvYjogZGVzY3JpcHRpb25JbnB1dC52YWx1ZSB9KVxyXG59XHJcblxyXG4vKipcclxuICogSGFuZGxlcyBvcGVuIHBob3RvIG9uIGNhcmQgY2xpY2sgKHNlbnQgdG8gcG9wdXBXaXRoQ2FyZClcclxuICovXHJcbmZ1bmN0aW9uIGhhbmRsZUNhcmRDbGljaygpIHtcclxuICAgIHBob3RvUG9wdXAub3Blbih0aGlzLl9pbWFnZSwgdGhpcy5fbmFtZSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBFbmFibGVzIHZhbGlkYXRpb24gb24gYWxsIGZvcm1zLlxyXG4gKiBTYXZlcyB0aGUgZm9ybVZhbGlkYXRvcnMgb24gYSBNYXAgZm9yIGZ1dHVyZSBhY2Nlc3NcclxuICovXHJcbmZ1bmN0aW9uIGVuYWJsZUZvcm1WYWxpZGF0aW9uT25BbGxGb3JtcygpIHtcclxuICBjb25zdCBmb3JtTGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh2YWxpZGF0aW9uQ29uZmlnLmZvcm1TZWxlY3RvcikpO1xyXG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XHJcbiAgICBjb25zdCBmb3JtTmFtZSA9IGZvcm1FbGVtZW50LmdldEF0dHJpYnV0ZShcIm5hbWVcIik7XHJcbiAgICBjb25zdCBmb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbkNvbmZpZywgZm9ybUVsZW1lbnQpO1xyXG4gICAgZm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbiAgICBmb3Jtcy5zZXQoZm9ybU5hbWUsIGZvcm1WYWxpZGF0b3IpO1xyXG4gIH0pO1xyXG59XHJcblxyXG4vKiogVXNlciBpbmZvcm1hdGlvbiBsb2FkaW5nICovXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHVzZXJTZWxlY3RvcnMpO1xyXG51c2VySW5mby5zZXRVc2VySW5mbyhpbml0aWFsVXNlckluZm8pO1xyXG5cclxuLyoqIFBvcHVwIGxvYWRpbmcgYW5kIGV2ZW50IGxpc3RlbmVyIHNldHVwICovXHJcbmNvbnN0IGFkZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oJy5wb3B1cC1hZGQnLCBoYW5kbGVOZXdQbGFjZUZvcm1TdWJtaXQpO1xyXG4vL2FkZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmNvbnN0IGVkaXRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKCcucG9wdXAtZWRpdCcsIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KTtcclxuLy9lZGl0UG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuY29uc3QgcGhvdG9Qb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZSgnLnBvcHVwLXBob3RvJyk7XHJcbi8vcGhvdG9Qb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLyoqXHJcbiAqIExvYWRpbmcgY2FyZHMgd2l0aCBTZWN0aW9uXHJcbiAqL1xyXG5jb25zdCBzZWN0aW9uID0gbmV3IFNlY3Rpb24oIHtcclxuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXHJcbiAgICByZW5kZXJlcjogcmVuZGVyQ2FyZFxyXG4gIH0sXHJcbiAgcGhvdG9HcmlkU2VsZWN0b3IpO1xyXG5cclxuc2VjdGlvbi5yZW5kZXJlcigpO1xyXG5cclxuLyoqIEVuYWJsZSBWYWxpZGF0aW9uICovXHJcbmVuYWJsZUZvcm1WYWxpZGF0aW9uT25BbGxGb3JtcygpO1xyXG5cclxuXHJcbi8qKiBEZWNsYXJhdGlvbiBvZiB0aGUgZXZlbnQgbGlzdGVuZXJzICovXHJcblxyXG4vKiogQWRkIFBvcHVwIGFuZCBGb3JtICovXHJcbmFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGFkZFBvcHVwLm9wZW4oKTtcclxuICBmb3Jtcy5nZXQoZm9ybUFkZE5hbWUpLnJlc2V0VmFsaWRhdGlvbigpO1xyXG59KTtcclxuXHJcbmNsb3NlQnV0dG9uQWRkLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgYWRkUG9wdXAuY2xvc2UoKTtcclxufSk7XHJcblxyXG5cclxuLyoqIEVkaXQgUG9wdXAgYW5kIEZvcm0gKi9cclxuZWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGNvbnN0IGN1cnJlbnRVc2VySW5mbyA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgbmFtZUlucHV0LnZhbHVlID0gY3VycmVudFVzZXJJbmZvLm5hbWU7XHJcbiAgZGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IGN1cnJlbnRVc2VySW5mby5qb2I7XHJcbiAgZWRpdFBvcHVwLm9wZW4oKTtcclxuICBmb3Jtcy5nZXQoZm9ybUVkaXROYW1lKS5yZXNldFZhbGlkYXRpb24oKTtcclxufSk7XHJcblxyXG5jbG9zZUJ1dHRvbkVkaXQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBlZGl0UG9wdXAuY2xvc2UoKTtcclxufSk7XHJcblxyXG4vKiogUGhvdG8gcG9wdXAgKi9cclxuXHJcbmNsb3NlQnV0dG9uUGhvdG8uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBwaG90b1BvcHVwLmNsb3NlKCk7XHJcbn0pO1xyXG5cclxuXHJcblxyXG5cclxuXHJcbiIsImNsYXNzIFVzZXJJbmZvIHtcclxuICAgIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBqb2JTZWxlY3RvciB9KSB7XHJcbiAgICAgICAgdGhpcy5fbmFtZVNlbGVjdG9yID0gbmFtZVNlbGVjdG9yO1xyXG4gICAgICAgIHRoaXMuX2pvYlNlbGVjdG9yID0gam9iU2VsZWN0b3I7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgXHJcbiAgICAgICAgICAgIG5hbWU6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fbmFtZVNlbGVjdG9yKS50ZXh0Q29udGVudCxcclxuICAgICAgICAgICAgam9iOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2pvYlNlbGVjdG9yKS50ZXh0Q29udGVudFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgc2V0VXNlckluZm8oIHsgbmV3TmFtZSwgbmV3Sm9iIH0gKSB7XHJcbiAgICAgICAgY29uc3QgbmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fbmFtZVNlbGVjdG9yKTtcclxuICAgICAgICBjb25zdCBqb2IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2pvYlNlbGVjdG9yKTtcclxuXHJcbiAgICAgICAgbmFtZS50ZXh0Q29udGVudCA9IG5ld05hbWU7XHJcbiAgICAgICAgam9iLnRleHRDb250ZW50ID0gbmV3Sm9iO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgeyBVc2VySW5mbyB9OyIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgfVxyXG5cclxuICAgIG9wZW4ocGhvdG9JbWFnZSwgbmFtZSkge1xyXG4gICAgICAgIGNvbnN0IHBob3RvQ29udGFpbmVyID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwLXBob3RvX19jb250YWluZXInKTtcclxuICAgICAgICBjb25zdCBwaG90byA9IHBob3RvQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cC1waG90b19fcGhvdG8nKTtcclxuICAgICAgICBjb25zdCB0aXRsZSA9IHBob3RvQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cC1waG90b19fdGl0bGUnKTtcclxuXHJcbiAgICAgICAgcGhvdG8uc3JjID0gcGhvdG9JbWFnZTtcclxuICAgICAgICB0aXRsZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICAgICAgcGhvdG8uYWx0ID0gbmFtZTtcclxuICAgICAgICBzdXBlci5vcGVuKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7IFBvcHVwV2l0aEltYWdlIH07IiwiY2xhc3MgU2VjdGlvbiB7XHJcbiAgICBjb25zdHJ1Y3RvciggeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgICAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xyXG4gICAgICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICAgICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgICB9XHJcblxyXG4gICAgY2xlYXIoKSB7XHJcbiAgICAgICAgdGhpcy5fY29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyZXIoKSB7XHJcbiAgICAgICAgdGhpcy5jbGVhcigpO1xyXG5cclxuICAgICAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgdGhpcy5hZGRJdGVtKHRoaXMuX3JlbmRlcmVyKGl0ZW0pKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBhZGRJdGVtKGl0ZW0pIHtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChpdGVtKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHtTZWN0aW9ufVxyXG4iXSwibmFtZXMiOlsiRm9ybVZhbGlkYXRvciIsImNvbnN0cnVjdG9yIiwic2V0dGluZ3MiLCJmb3JtIiwidGhpcyIsIl9zZXR0aW5ncyIsIl9mb3JtIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsImlkIiwiY2xhc3NMaXN0IiwiYWRkIiwiaW5wdXRFcnJvckNsYXNzIiwidGV4dENvbnRlbnQiLCJlcnJvckNsYXNzIiwiX2hpZGVJbnB1dEVycm9yIiwicmVtb3ZlIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInZhbGlkaXR5IiwidmFsaWQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfaW5wdXRMaXN0Iiwic29tZSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIl9idXR0b25FbGVtZW50IiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsInNldEF0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsIl9zZXRFdmVudExpc3RlbmVycyIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJmb3JFYWNoIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlc2V0VmFsaWRhdGlvbiIsImVuYWJsZVZhbGlkYXRpb24iLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsImRvY3VtZW50IiwiQ2FyZCIsImNhcmRTZWxlY3RvciIsImhhbmRsZUNhcmRDbGljayIsIm5hbWUiLCJsaW5rIiwiX2VsZW1lbnQiLCJ0b2dnbGUiLCJfbmFtZSIsIl9pbWFnZSIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlQ2FyZENsaWNrIiwiY3JlYXRlQ2FyZCIsIl9jcmVhdGVOZXdQaG90b0NhcmRFbGVtZW50IiwiX2FkZEV2ZW50TGlzdGVuZXJzIiwibGlrZUJ1dHRvbiIsIl9hZGRMaWtlRXZlbnRMaXN0ZW5lciIsImRlbGV0ZUJ1dHRvbiIsIl9hZGREZWxldGVFdmVudExpc3RlbmVyIiwicGhvdG8iLCJfYWRkT3BlblBob3RvRXZlbnRMaXN0ZW5lciIsInBob3RvQ2FyZCIsImNsb25lTm9kZSIsInBob3RvVGl0bGUiLCJzcmMiLCJhbHQiLCJfaGFuZGxlTGlrZUV2ZW50IiwiX2hhbmRsZURlbGV0ZUV2ZW50IiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwia2V5IiwiX3BvcHVwIiwiY29udGFpbnMiLCJjbG9zZSIsInRhcmdldCIsIm9wZW4iLCJzZXRFdmVudExpc3RlbmVycyIsInJlbW92ZUV2ZW50TGlzdGVuZXJzIiwiX2hhbmRsZUNsaWNrT25PdmVybGF5Q2xvc2UiLCJfaGFuZGxlRXNjQ2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZVN1Ym1pdCIsInN1cGVyIiwiX2hhbmRsZVN1Ym1pdCIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0VmFsdWVzIiwiaW5wdXQiLCJnZXRBdHRyaWJ1dGUiLCJ2YWx1ZSIsIl9oYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCIsInJlc2V0IiwicG9wdXBFZGl0IiwicG9wdXBBZGQiLCJwb3B1cFBob3RvIiwiY2xvc2VCdXR0b25FZGl0IiwiY2xvc2VCdXR0b25BZGQiLCJjbG9zZUJ1dHRvblBob3RvIiwiZm9ybUVkaXQiLCJuYW1lSW5wdXQiLCJkZXNjcmlwdGlvbklucHV0IiwiZm9ybUFkZCIsInRpdGxlSW5wdXQiLCJsaW5rSW5wdXQiLCJwcm9maWxlIiwiZWRpdEJ1dHRvbiIsImFkZEJ1dHRvbiIsInBob3RvQ2FyZFRlbXBsYXRlIiwiY29udGVudCIsImZvcm1zIiwiTWFwIiwidmFsaWRhdGlvbkNvbmZpZyIsImZvcm1TZWxlY3RvciIsInBob3RvUG9wdXAiLCJ1c2VySW5mbyIsIm5hbWVTZWxlY3RvciIsImpvYlNlbGVjdG9yIiwiX25hbWVTZWxlY3RvciIsIl9qb2JTZWxlY3RvciIsImdldFVzZXJJbmZvIiwiam9iIiwic2V0VXNlckluZm8iLCJuZXdOYW1lIiwibmV3Sm9iIiwiYWRkUG9wdXAiLCJjYXJkIiwibmV3Q2FyZCIsInNlY3Rpb24iLCJhZGRJdGVtIiwiZWRpdFBvcHVwIiwicGhvdG9JbWFnZSIsInBob3RvQ29udGFpbmVyIiwidGl0bGUiLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiY2xlYXIiLCJpbm5lckhUTUwiLCJpdGVtIiwicHJlcGVuZCIsImZvcm1FbGVtZW50IiwiZm9ybU5hbWUiLCJmb3JtVmFsaWRhdG9yIiwic2V0IiwiZ2V0IiwiY3VycmVudFVzZXJJbmZvIl0sInNvdXJjZVJvb3QiOiIifQ==