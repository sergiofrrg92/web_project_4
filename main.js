!function(){"use strict";class e{constructor(e,t){this._settings=e,this._form=t}_showInputError(e,t){const o=this._form.querySelector(".".concat(e.id,"-error"));e.classList.add(this._settings.inputErrorClass),o.textContent=t,o.classList.add(this._settings.errorClass)}_hideInputError(e){const t=this._form.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._settings.inputErrorClass),t.classList.remove(this._settings.errorClass),t.textContent=""}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}_toggleButtonState(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._settings.inactiveButtonClass),this._buttonElement.setAttribute("disabled",!0)):(this._buttonElement.classList.remove(this._settings.inactiveButtonClass),this._buttonElement.removeAttribute("disabled"))}_setEventListeners(){this._inputList=Array.from(this._form.querySelectorAll(this._settings.inputSelector)),this._buttonElement=this._form.querySelector(this._settings.submitButtonSelector),this._toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}resetValidation(){this._inputList.forEach((e=>{this._hideInputError(e),this._toggleButtonState()}))}enableValidation(){this._setEventListeners(this._form),this._form.addEventListener("submit",(function(e){e.preventDefault()}))}}function t(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}document.querySelector(".popup-photo");class o{constructor(e,o,s,r,n){let{_id:i,name:c,link:l,likes:a}=e;t(this,"_handleLikeEvent",(()=>{this._element.querySelector(".photo-card__like-button").classList.contains("photo-card__like-button_active")?this._handleLikeClick(!1):this._handleLikeClick(!0)})),t(this,"_handleDeleteEvent",(()=>{this._handleDeleteCardClick()})),this._id=i,this._name=c,this._image=l,this._likes=a,this._cardSelector=o,this._handleCardClick=s,this._handleDeleteCardClick=r,this._handleLikeClick=n}getId(){return this._id}createCard(){return this._element=this._createNewPhotoCardElement(),this._addEventListeners(),this._element}deleteCard(){this._element.remove(),this._element=null}updateLikes(e,t){this._likes=e;const o=this._element.querySelector(".photo-card__like-button");this._element.querySelector(".photo-card__like-count").textContent=this._likes.length,JSON.stringify(this._likes).includes(t)?o.classList.add("photo-card__like-button_active"):o.classList.remove("photo-card__like-button_active")}_addEventListeners(){const e=this._element.querySelector(".photo-card__like-button");this._addLikeEventListener(e);const t=this._element.querySelector(".photo-card__delete-button");this._addDeleteEventListener(t);const o=this._element.querySelector(".photo-card__photo");this._addOpenPhotoEventListener(o)}_createNewPhotoCardElement(){const e=this._cardSelector.querySelector(".photo-card").cloneNode(!0),t=e.querySelector(".photo-card__photo"),o=e.querySelector(".photo-card__title"),s=e.querySelector(".photo-card__like-count");return t.src=this._image,t.alt=this._name,o.textContent=this._name,s.textContent=this._likes.length,e}_addLikeEventListener(e){e.addEventListener("click",this._handleLikeEvent)}_addDeleteEventListener(e){e.addEventListener("click",this._handleDeleteEvent)}_addOpenPhotoEventListener(e){e.addEventListener("click",(()=>{this._handleCardClick()}))}}function s(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class r{constructor(e){s(this,"_handleEscClose",(e=>{"Escape"==e.key&&this._popup.classList.contains("popup_opened")&&this.close()})),s(this,"_handleClickOnOverlayClose",(e=>{e.target.classList.contains("popup")&&this.close()})),this._popup=document.querySelector(e)}open(){this._popup.classList.add("popup_opened"),this.setEventListeners()}close(){this._popup.classList.remove("popup_opened"),this.removeEventListeners()}setEventListeners(){document.addEventListener("click",this._handleClickOnOverlayClose),document.addEventListener("keydown",this._handleEscClose),this._popup.querySelector(".popup__close-button").addEventListener("click",close)}removeEventListeners(){document.removeEventListener("click",this._handleClickOnOverlayClose),document.removeEventListener("keydown",this._handleEscClose),this._popup.querySelector(".popup__close-button").removeEventListener("click",close)}}class n extends r{constructor(e,t){var o,s;super(e),s=e=>{e.preventDefault(),this._handleSubmit(),this.close()},(o="_handleProfileFormSubmit")in this?Object.defineProperty(this,o,{value:s,enumerable:!0,configurable:!0,writable:!0}):this[o]=s,this._handleSubmit=t,this._form=this._popup.querySelector(".form")}_getInputValues(){const e={};return Array.from(this._popup.querySelectorAll(".form__text-input")).forEach((t=>{e[t.getAttribute("name")]=t.value})),e}setEventListeners(){this._form.addEventListener("submit",this._handleProfileFormSubmit),super.setEventListeners()}removeEventListeners(){this._form.removeEventListener("submit",this._handleProfileFormSubmit),super.removeEventListeners()}close(){this._form.reset(),super.close()}}class i{constructor(e,t){let{items:o,renderer:s}=e;this._items=o,this._renderer=s,this._container=document.querySelector(t)}clear(){this._container.innerHTML=""}renderer(){this.clear(),this._items.forEach((e=>{this.addItem(this._renderer(e))}))}addItem(e){this._container.prepend(e)}}const c=document.querySelector(".popup-edit"),l=document.querySelector(".popup-add"),a=document.querySelector(".popup-photo"),d=document.querySelector(".popup-delete"),u=c.querySelector(".popup__close-button"),h=l.querySelector(".popup__close-button"),_=a.querySelector(".popup__close-button"),p=(d.querySelector(".popup__close-button"),c.querySelector(".form")),m=p.querySelector('.form__text-input[name="name"]'),f=p.querySelector('.form__text-input[name="about-me"]'),v=l.querySelector(".form"),E=v.querySelector('.form__text-input[name="title"]'),b=v.querySelector('.form__text-input[name="image-link"]'),y=(d.querySelector(".form"),document.querySelector(".profile")),k=y.querySelector(".profile__edit-button"),S=y.querySelector(".profile__add-button"),L=document.querySelector("#photo-card__template").content,g=new Map;let C;const q={formSelector:".form",inputSelector:".form__text-input",submitButtonSelector:".form__submit-button",inactiveButtonClass:"form__submit-button_disabled",inputErrorClass:"form__text-input-error_active",errorClass:"form__input-error_visible"};function j(e){const t=new o(e,L,I,P,w),s=t.createCard();return t.updateLikes(t._likes,x._id),s}function I(){B.open(this._image,this._name)}function P(){D.open(),C=this}function w(e){e?A.addLike(this.getId()).then((e=>{console.log("Like added succesfully",e.likes),this.updateLikes(e.likes,x._id)})):A.removeLike(this.getId()).then((e=>{console.log("Like removed succesfully",e.likes),this.updateLikes(e.likes,x._id)}))}const A=new class{constructor(e){this._options=e}getInitialCards(){return fetch(this._options.baseUrl+"/cards/",{headers:this._options.headers}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status)))).then((e=>e)).catch((e=>Promise.reject("Error: ".concat(e.status)))).finally((()=>{console.log("All done")}))}setNewCard(e){let{cardName:t,cardLink:o}=e;return fetch(this._options.baseUrl+"/cards/",{method:"POST",headers:this._options.headers,body:JSON.stringify({name:t,link:o})}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status)))).then((e=>e)).catch((e=>Promise.reject("Error: ".concat(e.status)))).finally((()=>{console.log("All done")}))}addLike(e){return fetch(this._options.baseUrl+"/cards/likes/"+e,{method:"PUT",headers:this._options.headers}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status)))).then((e=>e)).catch((e=>Promise.reject("Error: ".concat(e.status)))).finally((()=>{console.log("All done")}))}removeLike(e){return fetch(this._options.baseUrl+"/cards/likes/"+e,{method:"DELETE",headers:this._options.headers}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status)))).then((e=>e)).catch((e=>Promise.reject("Error: ".concat(e.status)))).finally((()=>{console.log("All done")}))}deleteCard(e){return fetch(this._options.baseUrl+"/cards/"+e,{method:"DELETE",headers:this._options.headers}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status,", ").concat(e.body)))).then((e=>e)).catch((e=>Promise.reject("Error: ".concat(e.status,", ").concat(e.body)))).finally((()=>{console.log("All done")}))}getUserInfo(){return fetch(this._options.baseUrl+"/users/me",{headers:this._options.headers}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status)))).then((e=>e)).catch((e=>Promise.reject("Error: ".concat(e.status)))).finally((()=>{console.log("All done")}))}setUserInfo(e){let{newName:t,newAbout:o}=e;return fetch(this._options.baseUrl+"/users/me",{method:"PATCH",headers:this._options.headers,body:JSON.stringify({name:t,about:o})}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status)))).then((e=>e)).catch((e=>Promise.reject("Error: ".concat(e.status)))).finally((()=>{console.log("All done")}))}updateAvatar(e){return fetch(this._options.baseUrl+"/users/me/avatar",{method:"PATCH",headers:this._options.headers,body:JSON.stringify({avatar:e})}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status)))).then((e=>e)).catch((e=>Promise.reject("Error: ".concat(e.status)))).finally((()=>{console.log("All done")}))}}({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"b9d1c3b6-c0f4-4224-ad8f-4c81efa3f89d","Content-Type":"application/json"}}),x=new class{constructor(e){let{nameSelector:t,jobSelector:o}=e;this._nameSelector=t,this._jobSelector=o}getUserInfo(){return{name:document.querySelector(this._nameSelector).textContent,job:document.querySelector(this._jobSelector).textContent}}setUserInfo(e){let{name:t,about:o,_id:s}=e;const r=document.querySelector(this._nameSelector),n=document.querySelector(this._jobSelector);r.textContent=t,n.textContent=o,this._id=s}}({nameSelector:".profile__name",jobSelector:".profile__description"});let U;A.getUserInfo().then((e=>{x.setUserInfo(e)})),A.getInitialCards().then((e=>{U=new i({items:e,renderer:j},".photos__grid"),U.renderer()}));const O=new n(".popup-add",(function(){const e={cardName:E.value,cardLink:b.value};A.setNewCard(e).then((e=>{const t=new o(e,L,I,P,w);U.addItem(t.createCard()),t.updateLikes(t._likes,x._id)}))})),N=new n(".popup-edit",(function(){A.setUserInfo({newName:m.value,newAbout:f.value}).then((e=>{x.setUserInfo(e)}))})),D=new n(".popup-delete",(function(){A.deleteCard(C.getId()).then((()=>{console.log("Card deleted"),C.deleteCard(),C=null}))})),B=new class extends r{constructor(e){super(e)}open(e,t){const o=this._popup.querySelector(".popup-photo__container"),s=o.querySelector(".popup-photo__photo"),r=o.querySelector(".popup-photo__title");s.src=e,r.textContent=t,s.alt=t,super.open()}}(".popup-photo");Array.from(document.querySelectorAll(q.formSelector)).forEach((t=>{const o=t.getAttribute("name"),s=new e(q,t);s.enableValidation(),g.set(o,s)})),S.addEventListener("click",(()=>{O.open(),g.get("add-form").resetValidation()})),h.addEventListener("click",(()=>{O.close()})),k.addEventListener("click",(()=>{const e=x.getUserInfo();m.value=e.name,f.value=e.job,N.open(),g.get("edit-form").resetValidation()})),u.addEventListener("click",(()=>{N.close()})),_.addEventListener("click",(()=>{B.close()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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bUJBQ2RvRyxFQUFNK0QsSUFBSUYsRUFBVUMsTUFzRHhCakUsRUFBVW5HLGlCQUFpQixTQUFTLEtBQ2xDNkosRUFBU3RHLE9BQ1QrQyxFQUFNZ0UsSUFwTlksWUFvTktySyxxQkFHekJ3RixFQUFlekYsaUJBQWlCLFNBQVMsS0FDdkM2SixFQUFTeEcsV0FLWDZDLEVBQVdsRyxpQkFBaUIsU0FBUyxLQUNuQyxNQUFNdUssRUFBa0J4RCxFQUFTOEIsY0FDakNqRCxFQUFVdkIsTUFBUWtHLEVBQWdCM0osS0FDbENpRixFQUFpQnhCLE1BQVFrRyxFQUFnQmQsSUFDekNLLEVBQVV2RyxPQUNWK0MsRUFBTWdFLElBbk9hLGFBbU9LcksscUJBRzFCdUYsRUFBZ0J4RixpQkFBaUIsU0FBUyxLQUN4QzhKLEVBQVV6RyxXQUtacUMsRUFBaUIxRixpQkFBaUIsU0FBUyxLQUN6Q2dILEVBQVczRCxXIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtKXtcclxuICAgIHRoaXMuX3NldHRpbmdzID0gc2V0dGluZ3M7XHJcbiAgICB0aGlzLl9mb3JtID0gZm9ybTtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9zZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuZXJyb3JDbGFzcyk7XHJcbiAgfTtcclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3MuZXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gIH07XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgdHJ1ZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fc2V0dGluZ3MuaW5wdXRTZWxlY3RvcikpO1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9zZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcblxyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCl7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycyh0aGlzLl9mb3JtKTtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBmdW5jdGlvbiAoZXZ0KSB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcbiAgfTtcclxufVxyXG5cclxuXHJcbmV4cG9ydCB7Rm9ybVZhbGlkYXRvcn07XHJcbiIsIlxyXG5jb25zdCBwb3B1cFBob3RvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwLXBob3RvJyk7XHJcblxyXG5cclxuY2xhc3MgQ2FyZCB7XHJcblxyXG4gICAgY29uc3RydWN0b3IoeyBfaWQsIG5hbWUsIGxpbmssIGxpa2VzIH0sIGNhcmRTZWxlY3RvciwgaGFuZGxlQ2FyZENsaWNrLCBoYW5kbGVEZWxldGVDYXJkQ2xpY2ssIGhhbmRsZUxpa2VDbGljaykge1xyXG5cclxuICAgICAgICB0aGlzLl9pZCA9IF9pZDtcclxuICAgICAgICB0aGlzLl9uYW1lID0gbmFtZTtcclxuICAgICAgICB0aGlzLl9pbWFnZSA9IGxpbms7XHJcbiAgICAgICAgdGhpcy5fbGlrZXMgPSBsaWtlcztcclxuICAgICAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNhcmRDbGljayA9IGhhbmRsZURlbGV0ZUNhcmRDbGljaztcclxuICAgICAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2sgPSBoYW5kbGVMaWtlQ2xpY2s7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0SWQoKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9pZDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgb25lIHNpbmdsZSBwaG90byBjYXJkIHdpdGggc3BlY2lmaWVkIGNhcmQgaW5mb3JtYXRpb24gKG9iamVjdClcclxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBjYXJkXHJcbiAgICAgKiBAcmV0dXJucyBwaG90b0NhcmQgdG8gYmUgcmVuZGVyZWRcclxuICAgICAqL1xyXG4gICAgY3JlYXRlQ2FyZCgpIHtcclxuICAgICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2NyZWF0ZU5ld1Bob3RvQ2FyZEVsZW1lbnQoKTtcclxuICAgICAgdGhpcy5fYWRkRXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIGRlbGV0ZUNhcmQoKSB7XHJcbiAgICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZUxpa2VzKGxpa2VzLCB1c2VySWQpIHtcclxuICAgICAgdGhpcy5fbGlrZXMgPSBsaWtlcztcclxuICAgICAgY29uc3QgbGlrZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5waG90by1jYXJkX19saWtlLWJ1dHRvblwiKTtcclxuXHJcbiAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5waG90by1jYXJkX19saWtlLWNvdW50XCIpLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xyXG5cclxuICAgICAgaWYoSlNPTi5zdHJpbmdpZnkodGhpcy5fbGlrZXMpLmluY2x1ZGVzKHVzZXJJZCkpIHtcclxuICAgICAgICBsaWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3Bob3RvLWNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZScpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGxpa2VCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgncGhvdG8tY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlJyk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgX2FkZEV2ZW50TGlzdGVuZXJzKCl7XHJcblxyXG4gICAgICAgIGNvbnN0IGxpa2VCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGhvdG8tY2FyZF9fbGlrZS1idXR0b25cIik7XHJcbiAgICAgICAgdGhpcy5fYWRkTGlrZUV2ZW50TGlzdGVuZXIobGlrZUJ1dHRvbik7XHJcblxyXG4gICAgICAgIGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5waG90by1jYXJkX19kZWxldGUtYnV0dG9uXCIpO1xyXG4gICAgICAgIHRoaXMuX2FkZERlbGV0ZUV2ZW50TGlzdGVuZXIoZGVsZXRlQnV0dG9uKTtcclxuXHJcbiAgICAgICAgY29uc3QgcGhvdG8gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGhvdG8tY2FyZF9fcGhvdG9cIik7XHJcbiAgICAgICAgdGhpcy5fYWRkT3BlblBob3RvRXZlbnRMaXN0ZW5lcihwaG90byk7XHJcbiAgICB9XHJcblxyXG4gICAgX2NyZWF0ZU5ld1Bob3RvQ2FyZEVsZW1lbnQoKSB7XHJcbiAgICAgICAgY29uc3QgcGhvdG9DYXJkID0gdGhpcy5fY2FyZFNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3IoXCIucGhvdG8tY2FyZFwiKS5jbG9uZU5vZGUodHJ1ZSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHBob3RvID0gcGhvdG9DYXJkLnF1ZXJ5U2VsZWN0b3IoXCIucGhvdG8tY2FyZF9fcGhvdG9cIik7XHJcbiAgICAgICAgY29uc3QgcGhvdG9UaXRsZSA9IHBob3RvQ2FyZC5xdWVyeVNlbGVjdG9yKFwiLnBob3RvLWNhcmRfX3RpdGxlXCIpO1xyXG4gICAgICAgIGNvbnN0IHBob3RvTGlrZXMgPSBwaG90b0NhcmQucXVlcnlTZWxlY3RvcihcIi5waG90by1jYXJkX19saWtlLWNvdW50XCIpO1xyXG5cclxuICAgICAgICBwaG90by5zcmMgPSB0aGlzLl9pbWFnZTtcclxuICAgICAgICBwaG90by5hbHQgPSB0aGlzLl9uYW1lO1xyXG4gICAgICAgIHBob3RvVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gICAgICAgIHBob3RvTGlrZXMudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGg7XHJcblxyXG4gICAgICAgIHJldHVybiBwaG90b0NhcmQ7XHJcbiAgICB9XHJcblxyXG4gICAgLypcclxuICAgIEtlZXBpbmcgY29tbWVudCBmb3IgbGVhcm5pbmcgcHVycG9zZXNcclxuICAgIGRlY2xhcmUgbWV0aG9kcyBhcyBhcnJvdyBmdW5jdGlvbnMgdG8gbm90IGxvc2UgY29udGV4dCBgdGhpc2AuIGB0aGlzYCBpcyBDYXJkIGluc3RhbmNlIGhlcmVcclxuICAgICovXHJcbiAgICBfaGFuZGxlTGlrZUV2ZW50ID0gKCkgPT4ge1xyXG4gICAgICBjb25zdCBsaWtlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBob3RvLWNhcmRfX2xpa2UtYnV0dG9uXCIpO1xyXG4gICAgICBpZihsaWtlQnV0dG9uLmNsYXNzTGlzdC5jb250YWlucygncGhvdG8tY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlJykpIHtcclxuICAgICAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2soZmFsc2UpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljayh0cnVlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9hZGRMaWtlRXZlbnRMaXN0ZW5lcihsaWtlQnV0dG9uKSB7XHJcbiAgICAgICAgbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlTGlrZUV2ZW50KTtcclxuICAgIH1cclxuXHJcbiAgICBfaGFuZGxlRGVsZXRlRXZlbnQgPSAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNhcmRDbGljaygpO1xyXG4gICAgfVxyXG5cclxuICAgIF9hZGREZWxldGVFdmVudExpc3RlbmVyKGRlbGV0ZUJ1dHRvbikge1xyXG4gICAgICAgIGRlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlRGVsZXRlRXZlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIF9hZGRPcGVuUGhvdG9FdmVudExpc3RlbmVyKHBob3RvKSB7XHJcbiAgICAgICAgcGhvdG8uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljaygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IHtDYXJkfVxyXG4iLCJjbGFzcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgfVxyXG5cclxuICAgIG9wZW4oKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5lZFwiKTtcclxuICAgICAgICB0aGlzLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xvc2UoKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX29wZW5lZFwiKTtcclxuICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVDbGlja09uT3ZlcmxheUNsb3NlKTtcclxuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgICB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Nsb3NlLWJ1dHRvbicpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjbG9zZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVDbGlja09uT3ZlcmxheUNsb3NlKTtcclxuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgICB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Nsb3NlLWJ1dHRvbicpLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjbG9zZSk7XHJcbiAgICB9XHJcblxyXG4gICAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xyXG4gICAgICAgIGlmKGV2dC5rZXkgPT0gXCJFc2NhcGVcIiAmJiB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX29wZW5lZCcpKXtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfaGFuZGxlQ2xpY2tPbk92ZXJsYXlDbG9zZSA9IChldnQpID0+IHtcclxuICAgICAgICBpZihldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwXCIpKXtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgIH1cclxuICB9XHJcblxyXG59XHJcblxyXG5leHBvcnQge1BvcHVwfTtcclxuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZVN1Ym1pdCkge1xyXG4gICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgICAgdGhpcy5faGFuZGxlU3VibWl0ID0gaGFuZGxlU3VibWl0O1xyXG4gICAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLmZvcm0nKTtcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICAgICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcclxuICAgICAgICBjb25zdCBpbnB1dHMgPSBBcnJheS5mcm9tKHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZm9ybV9fdGV4dC1pbnB1dFwiKSk7XHJcblxyXG4gICAgICAgIGlucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICAgICAgICBpbnB1dFZhbHVlc1tpbnB1dC5nZXRBdHRyaWJ1dGUoJ25hbWUnKV0gPSBpbnB1dC52YWx1ZTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGlucHV0VmFsdWVzO1xyXG4gICAgfVxyXG5cclxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgdGhpcy5faGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQpO1xyXG4gICAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbW92ZUV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICB0aGlzLl9mb3JtLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgdGhpcy5faGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQpO1xyXG4gICAgICBzdXBlci5yZW1vdmVFdmVudExpc3RlbmVycygpO1xyXG4gICAgfVxyXG5cclxuICAgIGNsb3NlKCkge1xyXG4gICAgICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcclxuICAgICAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIF9oYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCA9IChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCgpO1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7IFBvcHVwV2l0aEZvcm0gfVxyXG4iLCJjbGFzcyBTZWN0aW9uIHtcclxuICAgIGNvbnN0cnVjdG9yKCB7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICAgIH1cclxuXHJcbiAgICBjbGVhcigpIHtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXJlcigpIHtcclxuICAgICAgICB0aGlzLmNsZWFyKCk7XHJcblxyXG4gICAgICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICB0aGlzLmFkZEl0ZW0odGhpcy5fcmVuZGVyZXIoaXRlbSkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZEl0ZW0oaXRlbSkge1xyXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGl0ZW0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQge1NlY3Rpb259XHJcbiIsImltcG9ydCBcIi4vc3R5bGVzL2luZGV4LmNzc1wiO1xyXG5cclxuaW1wb3J0IHsgRm9ybVZhbGlkYXRvciB9IGZyb20gXCIuL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgeyBDYXJkIH0gZnJvbSBcIi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCB7IFBvcHVwV2l0aEZvcm0gfSBmcm9tIFwiLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IHsgUG9wdXBXaXRoSW1hZ2UgfSBmcm9tIFwiLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCB7IFVzZXJJbmZvIH0gZnJvbSBcIi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiXHJcbmltcG9ydCB7IFNlY3Rpb24gfSBmcm9tIFwiLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IHsgQXBpIH0gZnJvbSBcIi4vY29tcG9uZW50cy9BcGkuanNcIlxyXG5cclxuLy9UT0RPIGhvdyB0byB1c2UgaXQgb24gUG9wdXBGb3JtIHdoZW4gb3BlbmluZyBpdCwgdG8gcmV0cmlldmUgdGhlIGluZm8uXHJcbmNvbnN0IHVzZXJTZWxlY3RvcnMgPSB7XHJcbiAgbmFtZVNlbGVjdG9yOiBcIi5wcm9maWxlX19uYW1lXCIsXHJcbiAgam9iU2VsZWN0b3I6IFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCJcclxufTtcclxuXHJcbmNvbnN0IGluaXRpYWxVc2VySW5mbyA9IHtcclxuICBuZXdOYW1lOiBcIkphY3F1ZXMgQ291c3RlYXVcIixcclxuICBuZXdKb2I6IFwiRXhwbG9yZXJcIlxyXG59O1xyXG5cclxuLyoqIERlY2xhcmF0aW9uIG9mIHRoZSBQb3B1cHMgKi9cclxuY29uc3QgcG9wdXBFZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwLWVkaXQnKTtcclxuY29uc3QgcG9wdXBBZGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXAtYWRkJyk7XHJcbmNvbnN0IHBvcHVwUGhvdG8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXAtcGhvdG8nKTtcclxuY29uc3QgcG9wdXBEZWxldGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXAtZGVsZXRlJylcclxuXHJcbi8qKiBEZWNsYXJhdGlvbiBvZiB0aGUgQ2xvc2UgQnV0dG9ucyAqL1xyXG5jb25zdCBjbG9zZUJ1dHRvbkVkaXQgPSBwb3B1cEVkaXQucXVlcnlTZWxlY3RvcignLnBvcHVwX19jbG9zZS1idXR0b24nKTtcclxuY29uc3QgY2xvc2VCdXR0b25BZGQgPSBwb3B1cEFkZC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Nsb3NlLWJ1dHRvbicpO1xyXG5jb25zdCBjbG9zZUJ1dHRvblBob3RvID0gcG9wdXBQaG90by5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Nsb3NlLWJ1dHRvbicpO1xyXG5jb25zdCBjbG9zZUJ1dHRvbkRlbGV0ZSA9IHBvcHVwRGVsZXRlLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2xvc2UtYnV0dG9uJyk7XHJcblxyXG4vKiogRGVjbGFyYXRpb24gb2YgdGhlIEZvcm1zICovXHJcblxyXG5jb25zdCBmb3JtRWRpdE5hbWUgPSAnZWRpdC1mb3JtJztcclxuY29uc3QgZm9ybUFkZE5hbWUgPSAnYWRkLWZvcm0nO1xyXG5jb25zdCBmb3JtRGVsZXRlTmFtZSA9ICdkZWxldGUtZm9ybSc7XHJcblxyXG5jb25zdCBmb3JtRWRpdCA9IHBvcHVwRWRpdC5xdWVyeVNlbGVjdG9yKCcuZm9ybScpO1xyXG5jb25zdCBuYW1lSW5wdXQgPSBmb3JtRWRpdC5xdWVyeVNlbGVjdG9yKCcuZm9ybV9fdGV4dC1pbnB1dFtuYW1lPVwibmFtZVwiXScpO1xyXG5jb25zdCBkZXNjcmlwdGlvbklucHV0ID0gZm9ybUVkaXQucXVlcnlTZWxlY3RvcignLmZvcm1fX3RleHQtaW5wdXRbbmFtZT1cImFib3V0LW1lXCJdJyk7XHJcblxyXG5jb25zdCBmb3JtQWRkID0gcG9wdXBBZGQucXVlcnlTZWxlY3RvcignLmZvcm0nKTtcclxuY29uc3QgdGl0bGVJbnB1dCA9IGZvcm1BZGQucXVlcnlTZWxlY3RvcignLmZvcm1fX3RleHQtaW5wdXRbbmFtZT1cInRpdGxlXCJdJyk7XHJcbmNvbnN0IGxpbmtJbnB1dCA9IGZvcm1BZGQucXVlcnlTZWxlY3RvcignLmZvcm1fX3RleHQtaW5wdXRbbmFtZT1cImltYWdlLWxpbmtcIl0nKTtcclxuXHJcbmNvbnN0IGZvcm1EZWxldGUgPSBwb3B1cERlbGV0ZS5xdWVyeVNlbGVjdG9yKCcuZm9ybScpO1xyXG5cclxuY29uc3QgcHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlJyk7XHJcbmNvbnN0IGVkaXRCdXR0b24gPSBwcm9maWxlLnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIik7XHJcbmNvbnN0IGFkZEJ1dHRvbiA9IHByb2ZpbGUucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xyXG5cclxuLyoqIERlY2xhcmF0aW9uIG9mIHRoZSBQaG90b3MgKi9cclxuY29uc3QgcGhvdG9HcmlkU2VsZWN0b3IgPSBcIi5waG90b3NfX2dyaWRcIjtcclxuY29uc3QgcGhvdG9DYXJkVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Bob3RvLWNhcmRfX3RlbXBsYXRlXCIpLmNvbnRlbnQ7XHJcblxyXG4vKiogRGVjbGFyYXRpb24gb2YgdGhlIEluaXRpYWwgQ2FyZHMgKi9cclxuY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3lvc2VtaXRlLmpwZ1wiXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xha2UtbG91aXNlLmpwZ1wiXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2JhbGQtbW91bnRhaW5zLmpwZ1wiXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGF0ZW1hci5qcGdcIlxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvdmFub2lzZS5qcGdcIlxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWdvLmpwZ1wiXHJcbiAgfVxyXG5dO1xyXG5cclxuY29uc3QgZm9ybXMgPSBuZXcgTWFwKCk7XHJcbmxldCBjYXJkVG9EZWxldGU7XHJcblxyXG4vKiogRGVjbGFyYXRpb24gb2YgdGhlIFNldHRpbmcgb2JqZWN0IGZvciBjYXJkIHZhbGlkYXRpb24gKi9cclxuY29uc3QgdmFsaWRhdGlvbkNvbmZpZyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLmZvcm1cIixcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5mb3JtX190ZXh0LWlucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLmZvcm1fX3N1Ym1pdC1idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcImZvcm1fX3N1Ym1pdC1idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwiZm9ybV9fdGV4dC1pbnB1dC1lcnJvcl9hY3RpdmVcIixcclxuICBlcnJvckNsYXNzOiBcImZvcm1fX2lucHV0LWVycm9yX3Zpc2libGVcIlxyXG59O1xyXG5cclxuXHJcbi8qKlxyXG4gKiBIYW5kbGVzIGNhcmQgY3JlYXRpb24gb24gU2VjdGlvblxyXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSAtIFRoZSB0aXRsZSBvZiB0aGUgY2FyZFxyXG4gKiBAcGFyYW0ge3N0cmluZ30gbGluayAtIFRoZSBsaW5rIG9mIHRoZSBwaG90b1xyXG4gKi9cclxuZnVuY3Rpb24gcmVuZGVyQ2FyZChjYXJkKSB7XHJcbiAgY29uc3QgbmV3Q2FyZCA9IG5ldyBDYXJkKGNhcmQsIHBob3RvQ2FyZFRlbXBsYXRlLCBoYW5kbGVDYXJkQ2xpY2ssICBoYW5kbGVDYXJkRGVsZXRlQ2xpY2ssIGhhbmRsZUxpa2VDbGljayk7XHJcbiAgY29uc3QgcGhvdG9DYXJkID0gbmV3Q2FyZC5jcmVhdGVDYXJkKCk7XHJcbiAgbmV3Q2FyZC51cGRhdGVMaWtlcyhuZXdDYXJkLl9saWtlcywgdXNlckluZm8uX2lkKTtcclxuICByZXR1cm4gcGhvdG9DYXJkO1xyXG59XHJcblxyXG4vKipcclxuICogSGFuZGxlcyBuZXcgcGxhY2UgZm9ybSBzdWJtaXQgKFNlbnQgdG8gcG9wdXBXaXRoRm9ybSlcclxuICovXHJcbmZ1bmN0aW9uIGhhbmRsZU5ld1BsYWNlRm9ybVN1Ym1pdCgpIHtcclxuICBjb25zdCBjYXJkID0ge1xyXG4gICAgY2FyZE5hbWU6IHRpdGxlSW5wdXQudmFsdWUsXHJcbiAgICBjYXJkTGluazogbGlua0lucHV0LnZhbHVlXHJcbiAgfTtcclxuXHJcbiAgYXBpLnNldE5ld0NhcmQoY2FyZClcclxuICAgIC50aGVuKHJlcyA9PiB7XHJcbiAgICAgIGNvbnN0IG5ld0NhcmQgPSBuZXcgQ2FyZChyZXMsIHBob3RvQ2FyZFRlbXBsYXRlLCBoYW5kbGVDYXJkQ2xpY2ssIGhhbmRsZUNhcmREZWxldGVDbGljaywgaGFuZGxlTGlrZUNsaWNrKTtcclxuICAgICAgc2VjdGlvbi5hZGRJdGVtKG5ld0NhcmQuY3JlYXRlQ2FyZCgpKTtcclxuICAgICAgbmV3Q2FyZC51cGRhdGVMaWtlcyhuZXdDYXJkLl9saWtlcywgdXNlckluZm8uX2lkKTtcclxuICAgICAgfSlcclxufVxyXG5cclxuLyoqXHJcbiAqIEhhbmRsZXMgbmV3IHByb2ZpbGUgZm9ybSBzdWJtaXQgKFNlbnQgdG8gcG9wdXBXaXRoRm9ybSlcclxuICovXHJcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KCkge1xyXG4gIGFwaS5zZXRVc2VySW5mbyh7IG5ld05hbWU6IG5hbWVJbnB1dC52YWx1ZSwgbmV3QWJvdXQ6IGRlc2NyaXB0aW9uSW5wdXQudmFsdWUgfSlcclxuICAudGhlbiggcmVzID0+IHtcclxuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHJlcyk7XHJcbiAgfSlcclxufVxyXG5cclxuLyoqXHJcbiAqIERlbGV0ZXMgdGhlIHNlbGVjdGVkIENhcmRcclxuICovXHJcbmZ1bmN0aW9uIGhhbmRsZURlbGV0ZUZvcm1TdWJtaXQoKSB7XHJcbiAgYXBpLmRlbGV0ZUNhcmQoY2FyZFRvRGVsZXRlLmdldElkKCkpXHJcbiAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiQ2FyZCBkZWxldGVkXCIpO1xyXG4gICAgICBjYXJkVG9EZWxldGUuZGVsZXRlQ2FyZCgpO1xyXG4gICAgICBjYXJkVG9EZWxldGU9bnVsbDtcclxuICAgIH0pXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBIYW5kbGVzIG9wZW4gcGhvdG8gb24gY2FyZCBjbGljayAoc2VudCB0byBwb3B1cFdpdGhDYXJkKVxyXG4gKi9cclxuZnVuY3Rpb24gaGFuZGxlQ2FyZENsaWNrKCkge1xyXG4gIHBob3RvUG9wdXAub3Blbih0aGlzLl9pbWFnZSwgdGhpcy5fbmFtZSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUNhcmREZWxldGVDbGljaygpIHtcclxuICBkZWxldGVQb3B1cC5vcGVuKCk7XHJcbiAgY2FyZFRvRGVsZXRlID0gdGhpcztcclxufVxyXG5cclxuLyoqXHJcbiAqIENhbGxzIHRoZSBBUEkgdG8gYWRkL3JlbW92ZSBhIGxpa2UgdG8gdGhlIGxpc3QgZGVwZW5kaW5nIG9uIHRoZSBpc0xpa2VkIHBhcmFtLlxyXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGlzTGlrZWQgXHJcbiAqL1xyXG5mdW5jdGlvbiBoYW5kbGVMaWtlQ2xpY2soaXNMaWtlZCkge1xyXG4gIGlmKGlzTGlrZWQpIHtcclxuICAgIGFwaS5hZGRMaWtlKHRoaXMuZ2V0SWQoKSlcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiTGlrZSBhZGRlZCBzdWNjZXNmdWxseVwiLCByZXMubGlrZXMpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlTGlrZXMocmVzLmxpa2VzLCB1c2VySW5mby5faWQpO1xyXG4gICAgICB9KVxyXG4gIH0gZWxzZSB7XHJcbiAgICBhcGkucmVtb3ZlTGlrZSh0aGlzLmdldElkKCkpXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIkxpa2UgcmVtb3ZlZCBzdWNjZXNmdWxseVwiLCByZXMubGlrZXMpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlTGlrZXMocmVzLmxpa2VzLCB1c2VySW5mby5faWQpO1xyXG4gICAgICB9KVxyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEVuYWJsZXMgdmFsaWRhdGlvbiBvbiBhbGwgZm9ybXMuXHJcbiAqIFNhdmVzIHRoZSBmb3JtVmFsaWRhdG9ycyBvbiBhIE1hcCBmb3IgZnV0dXJlIGFjY2Vzc1xyXG4gKi9cclxuZnVuY3Rpb24gZW5hYmxlRm9ybVZhbGlkYXRpb25PbkFsbEZvcm1zKCkge1xyXG4gIGNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHZhbGlkYXRpb25Db25maWcuZm9ybVNlbGVjdG9yKSk7XHJcbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcclxuICAgIGNvbnN0IGZvcm1OYW1lID0gZm9ybUVsZW1lbnQuZ2V0QXR0cmlidXRlKFwibmFtZVwiKTtcclxuICAgIGNvbnN0IGZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uQ29uZmlnLCBmb3JtRWxlbWVudCk7XHJcbiAgICBmb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuICAgIGZvcm1zLnNldChmb3JtTmFtZSwgZm9ybVZhbGlkYXRvcik7XHJcbiAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTZXR0aW5nIHVwIHRoZSBBcGkgY2xhc3NcclxuICovXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xyXG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cC0xMlwiLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246IFwiYjlkMWMzYjYtYzBmNC00MjI0LWFkOGYtNGM4MWVmYTNmODlkXCIsXHJcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxyXG4gIH1cclxufSk7XHJcblxyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh1c2VyU2VsZWN0b3JzKTtcclxuXHJcbi8qKiBVc2VyIGluZm9ybWF0aW9uIGxvYWRpbmcgKi9cclxuYXBpLmdldFVzZXJJbmZvKClcclxuICAudGhlbihyZXMgPT4ge1xyXG4gICAgdXNlckluZm8uc2V0VXNlckluZm8ocmVzKTtcclxuICB9KVxyXG5cclxuLyoqXHJcbiAqIExvYWRpbmcgY2FyZHMgd2l0aCBTZWN0aW9uXHJcbiAqL1xyXG5cclxubGV0IHNlY3Rpb247XHJcblxyXG5hcGkuZ2V0SW5pdGlhbENhcmRzKClcclxuICAudGhlbihyZXMgPT4ge1xyXG4gICAgc2VjdGlvbiA9IG5ldyBTZWN0aW9uKCB7XHJcbiAgICAgIGl0ZW1zOiByZXMsXHJcbiAgICAgIHJlbmRlcmVyOiByZW5kZXJDYXJkXHJcbiAgICB9LFxyXG4gICAgcGhvdG9HcmlkU2VsZWN0b3IpO1xyXG5cclxuICAgIHNlY3Rpb24ucmVuZGVyZXIoKTtcclxuXHJcbn0pO1xyXG5cclxuLyoqIFBvcHVwIGxvYWRpbmcgYW5kIGV2ZW50IGxpc3RlbmVyIHNldHVwICovXHJcbmNvbnN0IGFkZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oJy5wb3B1cC1hZGQnLCBoYW5kbGVOZXdQbGFjZUZvcm1TdWJtaXQpO1xyXG5jb25zdCBlZGl0UG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSgnLnBvcHVwLWVkaXQnLCBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCk7XHJcbmNvbnN0IGRlbGV0ZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oJy5wb3B1cC1kZWxldGUnLCBoYW5kbGVEZWxldGVGb3JtU3VibWl0KVxyXG5jb25zdCBwaG90b1BvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKCcucG9wdXAtcGhvdG8nKTtcclxuXHJcbi8qKiBFbmFibGUgVmFsaWRhdGlvbiAqL1xyXG5lbmFibGVGb3JtVmFsaWRhdGlvbk9uQWxsRm9ybXMoKTtcclxuXHJcblxyXG4vKiogRGVjbGFyYXRpb24gb2YgdGhlIGV2ZW50IGxpc3RlbmVycyAqL1xyXG5cclxuLyoqIEFkZCBQb3B1cCBhbmQgRm9ybSAqL1xyXG5hZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBhZGRQb3B1cC5vcGVuKCk7XHJcbiAgZm9ybXMuZ2V0KGZvcm1BZGROYW1lKS5yZXNldFZhbGlkYXRpb24oKTtcclxufSk7XHJcblxyXG5jbG9zZUJ1dHRvbkFkZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGFkZFBvcHVwLmNsb3NlKCk7XHJcbn0pO1xyXG5cclxuXHJcbi8qKiBFZGl0IFBvcHVwIGFuZCBGb3JtICovXHJcbmVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBjb25zdCBjdXJyZW50VXNlckluZm8gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gIG5hbWVJbnB1dC52YWx1ZSA9IGN1cnJlbnRVc2VySW5mby5uYW1lO1xyXG4gIGRlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSBjdXJyZW50VXNlckluZm8uam9iO1xyXG4gIGVkaXRQb3B1cC5vcGVuKCk7XHJcbiAgZm9ybXMuZ2V0KGZvcm1FZGl0TmFtZSkucmVzZXRWYWxpZGF0aW9uKCk7XHJcbn0pO1xyXG5cclxuY2xvc2VCdXR0b25FZGl0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgZWRpdFBvcHVwLmNsb3NlKCk7XHJcbn0pO1xyXG5cclxuLyoqIFBob3RvIHBvcHVwICovXHJcblxyXG5jbG9zZUJ1dHRvblBob3RvLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgcGhvdG9Qb3B1cC5jbG9zZSgpO1xyXG59KTtcclxuXHJcblxyXG5cclxuXHJcblxyXG4iLCJjbGFzcyBBcGkge1xyXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xyXG4gICAgICAgIHRoaXMuX29wdGlvbnMgPSBvcHRpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEluaXRpYWxDYXJkcygpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2godGhpcy5fb3B0aW9ucy5iYXNlVXJsK1wiL2NhcmRzL1wiLCB7XHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX29wdGlvbnMuaGVhZGVyc1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAudGhlbiggcmVzID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcztcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuY2F0Y2goIGVyciA9PiB7XHJcbiAgICAgICAgICAgIC8vIGlmIHRoZSBzZXJ2ZXIgcmV0dXJucyBhbiBlcnJvciwgcmVqZWN0IHRoZSBwcm9taXNlXHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7ZXJyLnN0YXR1c31gKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuZmluYWxseSAoICgpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJBbGwgZG9uZVwiKTtcclxuICAgICAgICAgIH0pXHJcblxyXG4gICAgfVxyXG5cclxuICAgIHNldE5ld0NhcmQoIHsgY2FyZE5hbWUsIGNhcmRMaW5rIH0pIHtcclxuICAgICAgcmV0dXJuIGZldGNoKHRoaXMuX29wdGlvbnMuYmFzZVVybCtcIi9jYXJkcy9cIiwge1xyXG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgaGVhZGVyczogdGhpcy5fb3B0aW9ucy5oZWFkZXJzLFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgIG5hbWU6IGNhcmROYW1lLFxyXG4gICAgICAgICAgbGluazogY2FyZExpbmtcclxuICAgICAgICB9KVxyXG4gICAgICB9KVxyXG4gICAgICAudGhlbihyZXMgPT4ge1xyXG4gICAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgICAudGhlbiggcmVzID0+IHtcclxuICAgICAgICByZXR1cm4gcmVzO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goIGVyciA9PiB7XHJcbiAgICAgICAgLy8gaWYgdGhlIHNlcnZlciByZXR1cm5zIGFuIGVycm9yLCByZWplY3QgdGhlIHByb21pc2VcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke2Vyci5zdGF0dXN9YCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5maW5hbGx5ICggKCkgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiQWxsIGRvbmVcIik7XHJcbiAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgYWRkTGlrZShpZCkge1xyXG4gICAgICByZXR1cm4gZmV0Y2godGhpcy5fb3B0aW9ucy5iYXNlVXJsK1wiL2NhcmRzL2xpa2VzL1wiK2lkLCB7XHJcbiAgICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX29wdGlvbnMuaGVhZGVyc1xyXG4gICAgICB9KVxyXG4gICAgICAudGhlbihyZXMgPT4ge1xyXG4gICAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgICAudGhlbiggcmVzID0+IHtcclxuICAgICAgICByZXR1cm4gcmVzO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goIGVyciA9PiB7XHJcbiAgICAgICAgLy8gaWYgdGhlIHNlcnZlciByZXR1cm5zIGFuIGVycm9yLCByZWplY3QgdGhlIHByb21pc2VcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke2Vyci5zdGF0dXN9YCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5maW5hbGx5ICggKCkgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiQWxsIGRvbmVcIik7XHJcbiAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlTGlrZShpZCkge1xyXG4gICAgICByZXR1cm4gZmV0Y2godGhpcy5fb3B0aW9ucy5iYXNlVXJsK1wiL2NhcmRzL2xpa2VzL1wiK2lkLCB7XHJcbiAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX29wdGlvbnMuaGVhZGVyc1xyXG4gICAgICB9KVxyXG4gICAgICAudGhlbihyZXMgPT4ge1xyXG4gICAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgICAudGhlbiggcmVzID0+IHtcclxuICAgICAgICByZXR1cm4gcmVzO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goIGVyciA9PiB7XHJcbiAgICAgICAgLy8gaWYgdGhlIHNlcnZlciByZXR1cm5zIGFuIGVycm9yLCByZWplY3QgdGhlIHByb21pc2VcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke2Vyci5zdGF0dXN9YCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5maW5hbGx5ICggKCkgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiQWxsIGRvbmVcIik7XHJcbiAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgZGVsZXRlQ2FyZChpZCkge1xyXG4gICAgICByZXR1cm4gZmV0Y2godGhpcy5fb3B0aW9ucy5iYXNlVXJsK1wiL2NhcmRzL1wiK2lkLCB7XHJcbiAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX29wdGlvbnMuaGVhZGVyc1xyXG4gICAgICB9KVxyXG4gICAgICAudGhlbihyZXMgPT4ge1xyXG4gICAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9LCAke3Jlcy5ib2R5fWApO1xyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgICAgLnRoZW4oIHJlcyA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHJlcztcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKCBlcnIgPT4ge1xyXG4gICAgICAgIC8vIGlmIHRoZSBzZXJ2ZXIgcmV0dXJucyBhbiBlcnJvciwgcmVqZWN0IHRoZSBwcm9taXNlXHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtlcnIuc3RhdHVzfSwgJHtlcnIuYm9keX1gKTtcclxuICAgICAgfSlcclxuICAgICAgLmZpbmFsbHkgKCAoKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJBbGwgZG9uZVwiKTtcclxuICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBnZXRVc2VySW5mbygpIHtcclxuICAgICAgcmV0dXJuIGZldGNoKHRoaXMuX29wdGlvbnMuYmFzZVVybCtcIi91c2Vycy9tZVwiLCB7XHJcbiAgICAgICAgaGVhZGVyczogdGhpcy5fb3B0aW9ucy5oZWFkZXJzXHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKCByZXMgPT4ge1xyXG4gICAgICAgIHJldHVybiByZXM7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCggZXJyID0+IHtcclxuICAgICAgICAvLyBpZiB0aGUgc2VydmVyIHJldHVybnMgYW4gZXJyb3IsIHJlamVjdCB0aGUgcHJvbWlzZVxyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7ZXJyLnN0YXR1c31gKTtcclxuICAgICAgfSlcclxuICAgICAgLmZpbmFsbHkgKCAoKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJBbGwgZG9uZVwiKTtcclxuICAgICAgfSlcclxuXHJcbiAgICB9XHJcblxyXG4gICAgc2V0VXNlckluZm8oIHsgbmV3TmFtZSwgbmV3QWJvdXQgfSkge1xyXG4gICAgICByZXR1cm4gZmV0Y2godGhpcy5fb3B0aW9ucy5iYXNlVXJsK1wiL3VzZXJzL21lXCIsIHtcclxuICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9vcHRpb25zLmhlYWRlcnMsXHJcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgbmFtZTogbmV3TmFtZSxcclxuICAgICAgICAgIGFib3V0OiBuZXdBYm91dFxyXG4gICAgICAgIH0pXHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKCByZXMgPT4ge1xyXG4gICAgICAgIHJldHVybiByZXM7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCggZXJyID0+IHtcclxuICAgICAgICAvLyBpZiB0aGUgc2VydmVyIHJldHVybnMgYW4gZXJyb3IsIHJlamVjdCB0aGUgcHJvbWlzZVxyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7ZXJyLnN0YXR1c31gKTtcclxuICAgICAgfSlcclxuICAgICAgLmZpbmFsbHkgKCAoKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJBbGwgZG9uZVwiKTtcclxuICAgICAgfSlcclxuXHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlQXZhdGFyKGxpbmspIHtcclxuICAgICAgcmV0dXJuIGZldGNoKHRoaXMuX29wdGlvbnMuYmFzZVVybCtcIi91c2Vycy9tZS9hdmF0YXJcIiwge1xyXG4gICAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX29wdGlvbnMuaGVhZGVycyxcclxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICBhdmF0YXI6IGxpbmtcclxuICAgICAgICB9KVxyXG4gICAgICB9KVxyXG4gICAgICAudGhlbihyZXMgPT4ge1xyXG4gICAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgICAudGhlbiggcmVzID0+IHtcclxuICAgICAgICByZXR1cm4gcmVzO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goIGVyciA9PiB7XHJcbiAgICAgICAgLy8gaWYgdGhlIHNlcnZlciByZXR1cm5zIGFuIGVycm9yLCByZWplY3QgdGhlIHByb21pc2VcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke2Vyci5zdGF0dXN9YCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5maW5hbGx5ICggKCkgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiQWxsIGRvbmVcIik7XHJcbiAgICAgIH0pXHJcblxyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IHsgQXBpIH07XHJcbiIsImNsYXNzIFVzZXJJbmZvIHtcclxuICAgIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBqb2JTZWxlY3RvciB9KSB7XHJcbiAgICAgICAgdGhpcy5fbmFtZVNlbGVjdG9yID0gbmFtZVNlbGVjdG9yO1xyXG4gICAgICAgIHRoaXMuX2pvYlNlbGVjdG9yID0gam9iU2VsZWN0b3I7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgXHJcbiAgICAgICAgICAgIG5hbWU6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fbmFtZVNlbGVjdG9yKS50ZXh0Q29udGVudCxcclxuICAgICAgICAgICAgam9iOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2pvYlNlbGVjdG9yKS50ZXh0Q29udGVudFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgc2V0VXNlckluZm8oIHsgbmFtZSwgYWJvdXQsIF9pZCB9ICkge1xyXG4gICAgICAgIGNvbnN0IG5hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9uYW1lU2VsZWN0b3IpO1xyXG4gICAgICAgIGNvbnN0IGpvYkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2pvYlNlbGVjdG9yKTtcclxuXHJcbiAgICAgICAgbmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgICAgIGpvYkVsZW1lbnQudGV4dENvbnRlbnQgPSBhYm91dDtcclxuICAgICAgICB0aGlzLl9pZCA9IF9pZDtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHsgVXNlckluZm8gfTsiLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5jbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIH1cclxuXHJcbiAgICBvcGVuKHBob3RvSW1hZ2UsIG5hbWUpIHtcclxuICAgICAgICBjb25zdCBwaG90b0NvbnRhaW5lciA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cC1waG90b19fY29udGFpbmVyJyk7XHJcbiAgICAgICAgY29uc3QgcGhvdG8gPSBwaG90b0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcucG9wdXAtcGhvdG9fX3Bob3RvJyk7XHJcbiAgICAgICAgY29uc3QgdGl0bGUgPSBwaG90b0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcucG9wdXAtcGhvdG9fX3RpdGxlJyk7XHJcblxyXG4gICAgICAgIHBob3RvLnNyYyA9IHBob3RvSW1hZ2U7XHJcbiAgICAgICAgdGl0bGUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgICAgIHBob3RvLmFsdCA9IG5hbWU7XHJcbiAgICAgICAgc3VwZXIub3BlbigpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgeyBQb3B1cFdpdGhJbWFnZSB9OyJdLCJuYW1lcyI6WyJGb3JtVmFsaWRhdG9yIiwiY29uc3RydWN0b3IiLCJzZXR0aW5ncyIsImZvcm0iLCJ0aGlzIiwiX3NldHRpbmdzIiwiX2Zvcm0iLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsZW1lbnQiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJpbnB1dEVycm9yQ2xhc3MiLCJ0ZXh0Q29udGVudCIsImVycm9yQ2xhc3MiLCJfaGlkZUlucHV0RXJyb3IiLCJyZW1vdmUiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hhc0ludmFsaWRJbnB1dCIsIl9pbnB1dExpc3QiLCJzb21lIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX2J1dHRvbkVsZW1lbnQiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwic2V0QXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImZvckVhY2giLCJhZGRFdmVudExpc3RlbmVyIiwicmVzZXRWYWxpZGF0aW9uIiwiZW5hYmxlVmFsaWRhdGlvbiIsImV2dCIsInByZXZlbnREZWZhdWx0IiwiZG9jdW1lbnQiLCJDYXJkIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlRGVsZXRlQ2FyZENsaWNrIiwiaGFuZGxlTGlrZUNsaWNrIiwiX2lkIiwibmFtZSIsImxpbmsiLCJsaWtlcyIsIl9lbGVtZW50IiwiY29udGFpbnMiLCJfaGFuZGxlTGlrZUNsaWNrIiwiX2hhbmRsZURlbGV0ZUNhcmRDbGljayIsIl9uYW1lIiwiX2ltYWdlIiwiX2xpa2VzIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJnZXRJZCIsImNyZWF0ZUNhcmQiLCJfY3JlYXRlTmV3UGhvdG9DYXJkRWxlbWVudCIsIl9hZGRFdmVudExpc3RlbmVycyIsImRlbGV0ZUNhcmQiLCJ1cGRhdGVMaWtlcyIsInVzZXJJZCIsImxpa2VCdXR0b24iLCJsZW5ndGgiLCJKU09OIiwic3RyaW5naWZ5IiwiaW5jbHVkZXMiLCJfYWRkTGlrZUV2ZW50TGlzdGVuZXIiLCJkZWxldGVCdXR0b24iLCJfYWRkRGVsZXRlRXZlbnRMaXN0ZW5lciIsInBob3RvIiwiX2FkZE9wZW5QaG90b0V2ZW50TGlzdGVuZXIiLCJwaG90b0NhcmQiLCJjbG9uZU5vZGUiLCJwaG90b1RpdGxlIiwicGhvdG9MaWtlcyIsInNyYyIsImFsdCIsIl9oYW5kbGVMaWtlRXZlbnQiLCJfaGFuZGxlRGVsZXRlRXZlbnQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJrZXkiLCJfcG9wdXAiLCJjbG9zZSIsInRhcmdldCIsIm9wZW4iLCJzZXRFdmVudExpc3RlbmVycyIsInJlbW92ZUV2ZW50TGlzdGVuZXJzIiwiX2hhbmRsZUNsaWNrT25PdmVybGF5Q2xvc2UiLCJfaGFuZGxlRXNjQ2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZVN1Ym1pdCIsInN1cGVyIiwiX2hhbmRsZVN1Ym1pdCIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0VmFsdWVzIiwiaW5wdXQiLCJnZXRBdHRyaWJ1dGUiLCJ2YWx1ZSIsIl9oYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCIsInJlc2V0IiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJjbGVhciIsImlubmVySFRNTCIsIml0ZW0iLCJhZGRJdGVtIiwicHJlcGVuZCIsInBvcHVwRWRpdCIsInBvcHVwQWRkIiwicG9wdXBQaG90byIsInBvcHVwRGVsZXRlIiwiY2xvc2VCdXR0b25FZGl0IiwiY2xvc2VCdXR0b25BZGQiLCJjbG9zZUJ1dHRvblBob3RvIiwiZm9ybUVkaXQiLCJuYW1lSW5wdXQiLCJkZXNjcmlwdGlvbklucHV0IiwiZm9ybUFkZCIsInRpdGxlSW5wdXQiLCJsaW5rSW5wdXQiLCJwcm9maWxlIiwiZWRpdEJ1dHRvbiIsImFkZEJ1dHRvbiIsInBob3RvQ2FyZFRlbXBsYXRlIiwiY29udGVudCIsImZvcm1zIiwiTWFwIiwiY2FyZFRvRGVsZXRlIiwidmFsaWRhdGlvbkNvbmZpZyIsImZvcm1TZWxlY3RvciIsInJlbmRlckNhcmQiLCJjYXJkIiwibmV3Q2FyZCIsImhhbmRsZUNhcmREZWxldGVDbGljayIsInVzZXJJbmZvIiwicGhvdG9Qb3B1cCIsImRlbGV0ZVBvcHVwIiwiaXNMaWtlZCIsImFwaSIsImFkZExpa2UiLCJ0aGVuIiwicmVzIiwiY29uc29sZSIsImxvZyIsInJlbW92ZUxpa2UiLCJvcHRpb25zIiwiX29wdGlvbnMiLCJnZXRJbml0aWFsQ2FyZHMiLCJmZXRjaCIsImJhc2VVcmwiLCJoZWFkZXJzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImNhdGNoIiwiZXJyIiwiZmluYWxseSIsInNldE5ld0NhcmQiLCJjYXJkTmFtZSIsImNhcmRMaW5rIiwibWV0aG9kIiwiYm9keSIsImdldFVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJuZXdOYW1lIiwibmV3QWJvdXQiLCJhYm91dCIsInVwZGF0ZUF2YXRhciIsImF2YXRhciIsImF1dGhvcml6YXRpb24iLCJuYW1lU2VsZWN0b3IiLCJqb2JTZWxlY3RvciIsIl9uYW1lU2VsZWN0b3IiLCJfam9iU2VsZWN0b3IiLCJqb2IiLCJuYW1lRWxlbWVudCIsImpvYkVsZW1lbnQiLCJzZWN0aW9uIiwiYWRkUG9wdXAiLCJlZGl0UG9wdXAiLCJwaG90b0ltYWdlIiwicGhvdG9Db250YWluZXIiLCJ0aXRsZSIsImZvcm1FbGVtZW50IiwiZm9ybU5hbWUiLCJmb3JtVmFsaWRhdG9yIiwic2V0IiwiZ2V0IiwiY3VycmVudFVzZXJJbmZvIl0sInNvdXJjZVJvb3QiOiIifQ==